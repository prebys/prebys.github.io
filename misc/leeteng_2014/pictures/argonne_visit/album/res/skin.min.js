var VER="5.1.1",DEBUG=!1,UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",LOCALSTORAGE=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(b){return!1}}(),VEND=function(b){return 0<b.indexOf("Trident")?"ms":0<b.indexOf("AppleWebKit")?"webkit":0<b.indexOf("Gecko")?"moz":0<b.indexOf("Presto")?"o":0<b.indexOf("Blink")?"webkit":""}(navigator.userAgent);
String.wsp=[];String.wsp[9]=!0;String.wsp[10]=!0;String.wsp[11]=!0;String.wsp[12]=!0;String.wsp[13]=!0;String.wsp[32]=!0;String.wsp[133]=!0;String.wsp[160]=!0;String.wsp[5760]=!0;String.wsp[6158]=!0;String.wsp[8192]=!0;String.wsp[8193]=!0;String.wsp[8194]=!0;String.wsp[8195]=!0;String.wsp[8196]=!0;String.wsp[8197]=!0;String.wsp[8198]=!0;String.wsp[8199]=!0;String.wsp[8200]=!0;String.wsp[8201]=!0;String.wsp[8202]=!0;String.wsp[8203]=!0;String.wsp[8232]=!0;String.wsp[8233]=!0;String.wsp[8239]=!0;
String.wsp[8287]=!0;String.wsp[12288]=!0;String.prototype.trim=function(){var b=this+"",a=b.length;if(a){var c=String.wsp,d=0;for(--a;0<=a&&c[b.charCodeAt(a)];)--a;for(++a;d<a&&c[b.charCodeAt(d)];)++d;b=b.substring(d,a)}return b};String.prototype.trunc=function(b){var a=this+"";if(a.length<=b)return a.toString();b=a.substring(0,b-1);a=b.lastIndexOf(" ");return(6<a&&20>b.length-a?b.substring(0,a):b)+"..."};String.prototype.startsWith=function(b){return 0===(this+"").indexOf(b)};
String.prototype.endsWith=function(b){return(this+"").substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this+"",a=b.lastIndexOf(".");return 0>=a||a>=b.length-1?"":b.substring(a+1).toLowerCase()};String.prototype.replaceExt=function(b){var a=this+"",c=a.lastIndexOf(".");return 0>=c?a:a.substring(0,c+1)+b};String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};
String.prototype.getDir=function(){var b=(this+"").split("#")[0];return b.substring(0,b.lastIndexOf("/")+1)};String.prototype.getFile=function(){var b=(this+"").split("#")[0];return b.substring(b.lastIndexOf("/")+1)};String.prototype.getRelpath=function(b){var a=this+"",c=a.lastIndexOf("#");for(-1===c?c=a.length-1:c--;0<=c&&("/"!==a[c]||0!==b--);c--);return a.substring(c+1)};
String.prototype.fixUrl=function(){for(var b,a,c=this+"";0<(b=c.indexOf("../"));){if(1===b||-1===(a=c.lastIndexOf("/",b-2)))return c.substring(b+3);c=c.substring(0,a)+c.substring(b+2)}return c};String.prototype.fullUrl=function(){var b=this+"";b.match(/^(http|ftp|file)/)||(b=window.location.href.getDir()+b);return b.fixUrl()};
String.prototype.cleanupHTML=function(){for(var b=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],a=this+"",c=b.length-1;0<=c;c--)a=a.replace(b[c][0],b[c][1]);return a};String.prototype.stripHTML=function(){return(this+"").replace(/<\/?[^>]+>/gi,"")};String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,a){return(this.length?this+(a||" &middot; "):"")+b};
String.prototype.rgb2hex=function(){var b=this+"";if("#"===b.charAt(0)||"transparent"===b)return b;var a=b.match(/\d+/g),c="";if(a){for(var d=0;d<a.length&&3>d;d++)b=parseInt(a[d],10).toString(16),c+=(2>b.length?"0":"")+b;return"#"+c}return"transparent"};String.prototype.template=function(b){if(!b||!this)return this;for(var a=this+"",c=0;c<b.length;c++)a=a.replace(RegExp("\\{"+c+"\\}","gi"),b[c]);return a};Math.minMax=function(b,a,c){a=isNaN(a)?parseFloat(a):a;return a<b?b:a>c?c:a};
var getCoords=function(b){return b.touches&&0<b.touches.length?{x:Math.round(b.touches[0].clientX),y:Math.round(b.touches[0].clientY)}:null!==b.clientX?{x:Math.round(b.clientX),y:Math.round(b.clientY)}:null},noAction=function(b){b.preventDefault();return!1},fixFbComments=function(b){var a=window.location.href;-1===a.indexOf("?fb_comment_id=")?(a=a.split("#")[0],b&&"/"===a[a.length-1]&&(a+=b)):a=a.split("?")[0];document.getElementById("fb-comments").setAttribute("data-href",a)},initMobile=function(){if(/Mobile/.test(navigator.userAgent)&&
!(980<screen.width||980<screen.height||window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)){var b=function(){window.hasOwnProperty("pageYOffset")&&window.scrollTo(0,window.pageYOffset+1);return!0};setTimeout(function(){b()},1E3);$(window).on("orientationchange",b)}},log=function(){};
(function(b){var a,c=!1,d,e=1;log=function(f){DEBUG&&!c&&(a||(a=b('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){c=!0},function(){c=!1}).appendTo("body")),f===d?a.children(":first").empty().html(d+" ("+ ++e+")"):(b('<div style="height:2em;overflow:hidden;">'+f+"</div>").prependTo(a),d=f,e=1))};b.fn.logEvents=function(a){if(DEBUG){var c=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";
return this.each(function(){b(this).on(c,function(a){typeof a===UNDEF?log("Undefined event"):a.target?"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+(a.target.nodeName?a.target.nodeName.toLowerCase():"???")+"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?
":"+a.relatedTarget.id:"")+"</span>":"")):log("No event target!");return!0})})}};b.fn.logCss=function(a,c,d){if(DEBUG){d=d||20;c=c||2E3;var e=new Date;return this.each(function(){var m=b(this),r=function(a){var b=new Date-e;log(b+"&nbsp;::&nbsp;"+a+" = "+m.css(a));b>c&&clearInterval(l)},l=setInterval(function(){if(b.isArray(a))for(var c=0;c<a.length;c++)r(a[c]);else r(a)},d)})}}})(jQuery);
var translate=function(b,a){b=b.trim();if(typeof Texts!==UNDEF&&Texts.hasOwnProperty(b))return Texts[b];if(typeof a!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+b+"="+a),a;DEBUG&&console&&console.log("Missing translation: "+b);var c=b.replace(/([A-Z])/g," $1").toLowerCase();c[0]=c.charAt(0).toUpperCase();return c},getKeys=function(b,a){var c={},d,e=b.split(","),f=e.length;for(d=0;d<f;d++)c[e[d]]=translate(e[d],a[e]);return c},getTranslations=function(b){var a={},c;for(c in b)a[c]=
"object"===typeof b[c]?getTranslations(b[c]):translate(c,b[c]);return a},getRelativeDate=function(b){if(!b)return translate("today");if(1===b)return translate("yesterday");var a;730<=b?(a=translate("yearsAgo"),b=Math.floor(b/365)):60<=b?(a=translate("monthsAgo"),b=Math.floor(b/30.5)):a=translate("daysAgo");return a.replace("{0}",b)};
(function(b,a){/Trident/.test(navigator.userAgent)?/IEMobile/.test(navigator.userAgent)?(window.navigator.msPointerEnabled?(TOUCH_START="MSPointerDown",TOUCH_MOVE="MSPointerMove",TOUCH_END="MSPointerUp"):(TOUCH_START="pointerDown",TOUCH_MOVE="pointerMove",TOUCH_END="pointerUp"),a.touchMode=!0):a.touchMode=!1:(TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",/(Chrome|CriOS)/.test(navigator.userAgent)?a.touchMode=/Mobile/.test(navigator.userAgent):a.touchMode="ontouchstart"in window);
var c="moz"===VEND?"transform":"-"+VEND+"-transform";b.fn.translate=function(a,e,f){return this.each(function(){f&&b(this).addClass(f).data("tr_cls",f);this.style[c]="translate("+(a||0)+"px,"+(e||0)+"px)";b(this).data({tr_x:a,tr_y:e})})};b.fn.translateToPos=function(){return this.each(function(){var a=b(this),e=a.data("tr_x")||0,f=a.data("tr_y")||0;if(e||f)e=a.position(),(f=a.data("tr_cls"))&&a.removeClass(f),this.style[c]="translate(0,0)",a.removeData("tr_x tr_y").css({left:e.left,top:e.top})})}})(jQuery,
document);
(function(b){function a(){c&&(e(a),jQuery.fx.tick())}var c,d=0;b=["webkit","moz"];for(var e=window.requestAnimationFrame,f=window.cancelAnimationFrame;d<b.length&&!e;d++)e=window[b[d]+"RequestAnimationFrame"],f=f||window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];e?(window.requestAnimationFrame=e,window.cancelAnimationFrame=f,jQuery.fx.timer=function(b){b()&&jQuery.timers.push(b)&&!c&&(c=!0,a())},jQuery.fx.stop=function(){c=!1}):(window.requestAnimationFrame=function(a,
b){var c=(new Date).getTime(),e=Math.max(0,16-(c-d)),f=window.setTimeout(function(){a(c+e)},e);d=c+e;return f},window.cancelAnimationFrame=function(a){clearTimeout(a)})})(jQuery);
(function(b){var a=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var c=a.length;c;)b.event.fixHooks[a[--c]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=a.length;b;)this.addEventListener(a[--b],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var b=a.length;b;)this.removeEventListener(a[--b],d,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},
unmousewheel:function(a){return this.unbind("mousewheel",a)}});var d=function(a){var c=a||window.event,d=[].slice.call(arguments,1),h=0,q=0,m=0;a=b.event.fix(c);a.type="mousewheel";c.wheelDelta?h=c.wheelDelta/120:c.detail&&(h=-c.detail/3);m=h;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(m=0,q=-1*h);void 0!==c.wheelDeltaY&&(m=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(q=-1*c.wheelDeltaX/120);d.unshift(a,h,q,m);return(b.event.dispatch||b.event.handle).apply(this,d)}})(jQuery);
(function(b){b.event.special.dbltap={setup:function(){b(this).on("touchend.dbltap",b.event.special.dbltap.handler)},teardown:function(){b(this).off("touchend.dbltap")},handler:function(a){var c=[].slice.call(arguments,1),d=b(a.target),e=(new Date).getTime(),f=e-(d.data("lastTouch")||0);if(5<f&&300>f)return a.preventDefault(),d.data("lastTouch",0),a=b.e.fix(a||window.event),a.type="dbltap",c.unshift(a),(b.e.dispatch||b.e.handle).apply(this,c);d.data("lastTouch",e);return!0}}})(jQuery);
(function(b){b.cookie=function(a,c,d){var e,f,k=function(a){return/^(true|yes)$/.test(a)?!0:/^(false|no)$/.test(a)?!1:/^([\d.]+)$/.test(a)?parseFloat(a):a};if(1<arguments.length)return f=new Date,null===c?LOCALSTORAGE?localStorage.removeItem(a):document.cookie=encodeURIComponent(a)+"=; expires="+f.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof c)&&(f.setTime(f.getTime()+1E3*("number"!==typeof d?3600:d)),LOCALSTORAGE?localStorage.setItem(a,String(c)+"; "+String(f.getTime())):document.cookie=
encodeURIComponent(a)+"="+String(c)+"; expires="+f.toGMTString()+"; path=/"),c;if(a)if(LOCALSTORAGE){if(e=localStorage.getItem(a))if(e=e.split("; "),b.isArray(e)&&1<e.length){f=new Date;if(f.getTime()<parseInt(e[1],10))return k(e[0]);localStorage.removeItem(a)}else return k(e)}else{e=document.cookie.split(";");a+="=";for(var h=0;h<e.length;h++)f=e[h].trim(),0===f.indexOf(a)&&(f=f.substring(a.length),k(f))}return null}})(jQuery);
(function(b){(function(){function a(a){function c(a){var d=RegExp(b.map(a,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(d,decodeURIComponent)}}a=b.extend({unescape:!1},a||{});d.encoder=function(a){return!0===a?function(a){return a}:"string"===typeof a&&(a=c(a.split("")))||"function"===typeof a?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(a.unescape)}var c=-1===navigator.userAgent.indexOf("Firefox"),d={put:function(a,b){(b||window).location.hash=this.encoder(a)},
get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return c?decodeURIComponent(a):a}catch(b){return a}},encoder:encodeURIComponent},e={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,c){a(c);f.callback=b;f._options=c;f._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=d.get();f._appState=a;f.callback(a);setInterval(f.check,100)},check:function(){var a=d.get();a!==f._appState&&(f._appState=a,f.callback(a))},
load:function(a){a!==f._appState&&(d.put(a),f._appState=a,f.callback(a))}},hashchangeEvent:{_init:function(){f.callback(d.get());b(window).on("hashchange",f.check)},check:function(){f.callback(d.get())},load:function(a){d.put(a)}}},f=b.extend({},e.base);f.type="onhashchange"in window?"hashchangeEvent":"timer";b.extend(f,e[f.type]);b.history=f})()})(jQuery);
(function(b){b.fn.addModal=function(a,c,d){var e=b(this);"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){b.isArray(c)||(d=c,c=null);d=b.extend({},b.fn.addModal.defaults,d);d.savePosition=d.savePosition&&typeof d.uid!==UNDEF;var f=getTranslations(b.fn.addModal.text);d.defaultButton&&(d.defaultButton=translate(d.defaultButton,"OK"));var k,h,q,m,r,l,p,n,g=0,u;d.uid&&b("#"+d.uid).parents("._m_window").remove();k=b("<div>",{"class":"_m_window",role:"modal"}).css({opacity:0}).appendTo(e);e.css({position:"relative"});
var v=function(){p=e.width();n=e.height()};v();b(window).on("resize",v);d.darkenBackground&&k.addClass("darken");h=b("<div>",{id:d.uid||"_mod_"+Math.floor(1E4*Math.random()),"class":"_m_panel "+d.type}).css({width:d.width}).appendTo(k);q=b("<header>",{"class":"_m_head"}).appendTo(h);q.append(b("<h5>",{text:d.title||("error"===d.type||"warning"===d.type?f[d.type]:"")}));"error"!==d.type&&"warning"!==d.type||q.append(b("<span>",{"class":d.type,text:"!"}));var t=function(){m.trigger("removeTooltip");
u=clearTimeout(u);k.animate({opacity:0},d.speed,function(){k.remove()});return!1};k.on("destroy",t);if(d.blocking&&d.closeOnClickOut)k.on("click",function(a){if(b(a.target).hasClass("_m_window"))return t(a)});m=b("<a>",{href:NOLINK,"class":"close",html:"&times;"}).appendTo(q);document.touchMode?m[0].addEventListener(TOUCH_END,t):(m.on("click",t),m.addTooltip(f.closeWindow));f=function(a){a.preventDefault();var c=h.position().left,e=h.position().top,f=getCoords(a),k=p-h.width()-d.pad,g=n-h.height()-
d.pad,m=q.css("cursor");q.css({cursor:"move"});var t=function(a){a.preventDefault();a=getCoords(a);h.css({left:Math.minMax(d.pad,c+a.x-f.x,k),top:Math.minMax(d.pad,e+a.y-f.y,g)});return!1},l=function(a){a.preventDefault();b(document).off({mousemove:t,mouseup:l});q.css("cursor",m);d.savePosition&&D();return!1};if(document.touchMode)this.addEventListener(TOUCH_END,l),this.addEventListener(TOUCH_MOVE,t);else b(document).on({mousemove:t,mouseup:l});return!1};if(d.movable)if(document.touchMode)q[0].addEventListener(TOUCH_START,
f);else q.on("mousedown",f);r=b("<div>",{"class":"_m_cont"}).appendTo(h);l=b("<div>",{"class":"_m_cont_i"}).append(a).appendTo(r);!c&&d.defaultButton&&(c=[{t:d.defaultButton,h:t}]);if(c){var x,s=b("<div>",{"class":"buttons"}).appendTo(l),y=function(a){x.each(function(c){b(this).toggleClass("active",c===a)})},w=function(){b(document).off("keydown",A);t()},A=function(a){if(document.activeElement&&"input"===document.activeElement.nodeName||b.isFunction(d.enableKeyboard)&&!d.enableKeyboard())return!0;
a=a?a.keyCode:window.event.keyCode;if(27===a)return w(),!1;if(s){var c=s.find("a.active"),e=x.index(c);switch(a){case 13:case 10:b.isFunction(c[0].handler)&&!1!==c[0].handler.call(k)&&w();break;case 39:y((e+1)%x.length);break;case 37:y(e?e-1:x.length-1);break;default:return!0}return!1}return!0},v=function(a){a.preventDefault();a=a.target;b.isFunction(a.handler)&&!1!==a.handler.call(k,h)&&w();return!1};for(a=0;a<c.length;a++)a&&s.append(" "),f=b("<a>",{href:NOLINK,html:c[a].t}).on("click",v).appendTo(s),
b.isFunction(c[a].h)&&(f[0].handler=c[a].h);x=s.children("a");x.last().addClass("active");if(b.isFunction(d.enableKeyboard)||d.enableKeyboard)b(document).on("keydown",A)}if(d.resizable)if(q.on(document.touchMode?"dbltap":"dblclick",function(a){a.preventDefault();a=[h.position().left,h.position().top,h.width(),h.height()];var b=[d.pad,d.pad,p-2*d.pad,n-2*d.pad],c=function(a){h.css({left:Math.minMax(d.gap,a[0],p-a[2]-d.gap),top:Math.minMax(d.gap,a[1],n-a[3]-d.gap),width:a[2],height:a[3]});l.css({height:a[3]-
g})};a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]?c(h.data("wpos")):(c(b),h.data("wpos",a));d.savePosition&&D();return!1}),c=b("<a>",{"class":"resize"}).appendTo(h),a=function(a){a.preventDefault();var c=h.width(),e=h.height(),f=getCoords(a),m=k.width(),t=n-d.pad-h.position().top-g,m=p-d.pad-h.position().left,z=function(a){a.preventDefault();a=getCoords(a);var b=Math.min(Math.max(e+a.y-f.y-g,20),t);h.css({width:Math.min(Math.max(c+a.x-f.x,60),m),height:b+g});l.css({height:b});return!1},v=function(a){a.preventDefault();
b(document).off({mousemove:z,mouseup:v});d.savePosition&&D();return!1};if(document.touchMode)this.addEventListener(TOUCH_MOVE,z),this.addEventListener(TOUCH_END,v);else b(document).on({mousemove:z,mouseup:v});return!1},document.touchMode)c[0].addEventListener(TOUCH_START,a);else c.on("mousedown",a);var B=function(){var a=h.width(),b=h.height();g=b-l.height();a&&b&&p&&n&&(a+2*d.pad>p&&h.css({width:a=p-2*d.pad}),b+2*d.pad>n&&(h.css({height:b=n-2*d.pad}),l.css({height:n-2*d.pad-g})),h.css({left:Math.max(Math.round((p-
a)*d.pos[0]/2),d.pad),top:Math.max(Math.round((n-b)*d.pos[1]/2),d.pad)}))},z=function(a){var b=Math.minMax(d.pad,parseInt(a[0],10),p-d.pad-60),c=Math.minMax(d.pad,parseInt(a[1],10),n-d.pad-60);a=Math.minMax(120,parseInt(a[2],10),p-b-d.pad);(isNaN(b)||isNaN(c)||isNaN(a))&&B();g=q.outerHeight()+parseInt(r.css("padding-top"),10)+parseInt(r.css("padding-bottom"),10)+parseInt(l.css("padding-top"),10)+parseInt(l.css("padding-bottom"),10)+parseInt(r.css("border-top-width"),10);h.css({position:"absolute",
left:b,top:c,width:a});h.height()>(b=n-c-d.pad)&&(h.css({height:b}),l.css({height:b-g}))},D=function(){b.cookie("modalPosition"+d.uid,h.position().left+","+h.position().top+","+h.width()+","+h.height())};(function(a){k.css({opacity:0}).show();setTimeout(function(){a&&(a=a.split(","))&&b.isArray(a)&&3<a.length?z(a):B();d.blocking||k.css({width:0,height:0,right:"auto",bottom:"auto",overflow:"visible"});k.animate({opacity:1},d.speed);d.savePosition&&D();d.autoFade&&(u=setTimeout(t,d.autoFade));d.scrollIntoView&&
setTimeout(function(){var a=l.children(":not(.buttons)").find(".active:first");a&&a.length&&l.scrollTop(Math.max(Math.floor(a.position().top)-50,0))},200)},40)})(d.savePosition?b.cookie("modalPosition"+d.uid):null);return this}};b.fn.addModal.defaults={speed:300,autoFade:0,width:400,resizable:!1,movable:!0,blocking:!0,enableKeyboard:!0,closeOnClickOut:!0,darkenBackground:!0,savePosition:!1,scrollIntoView:!1,defaultButton:"okButton",pad:6,pos:[1,1],type:"normal"};b.fn.addModal.text={closeWindow:"Close window",
error:"error",warning:"warning"}})(jQuery);
(function(b){b.fn.addTooltip=function(a,c){a&&"string"!==typeof a&&!a.jquery&&(c=a,a=null);id={tooltip:"tooltip"};c=b.extend({},b.fn.addTooltip.defaults,c);b.fn.hideAllTooltips=function(){b("."+c.className).hide()};var d=function(a,d){var k;if(d)if("string"===typeof d)k=b("<div>",{html:d}).appendTo("body");else if(d.jquery)k=b.contains(document.body,d[0])?d:d.appendTo("body");else return null;else{(d=a.data(id.tooltip))?("."===d.charAt(0)?d=a.find(d):"#"===d.charAt(0)&&(d=b(d)),d.jquery&&d.removeClass("hidden")):
(d=a.attr("title"),a.removeAttr("title"));if(!d||!d.length)return null;k=b("<div>",{html:d}).appendTo("body")}k.addClass(c.className).hide();return k};return this.each(function(){var e=b(this),f,k,h,q=!1,m=!1,r,l=function(){h=clearTimeout(h);q=!0;f.finish().show()},p=function(){m||(clearTimeout(h),q=!1,h=setTimeout(u,100))},n=function(a){k=clearTimeout(k);clearTimeout(h);q=!1;h=setTimeout(u,100)},g=function(a){n();return!0},u=function(){!q&&f&&f.stop(!0,!1).fadeOut(200,function(){f.hide()})},v=function(){if(!(f=
d(e,a)))return!1;document.touchMode||(f.on("mouseover",l),f.on("mouseout",p));f.find("input, textarea").on({focus:function(){m=!0;l()},blur:function(){m=!1}});return!0},t=function(){var a=e.offset();a.top===r.top&&a.left===r.left&&f.fadeIn(300).alignTo(e,{pos:c.pos})},x=function(){if(f)f.stop(!0,!1),h=clearTimeout(h);else if(!v())return;r=e.offset();clearTimeout(k);k=setTimeout(t,c.delay);document.touchMode?(clearTimeout(h),h=setTimeout(u,c.stay)):q=!0},s=function(a){a.preventDefault();!f||f.is(":hidden")?
x():(q=!1,n(),"A"===e[0].nodeName&&((a=e.attr("href"))&&!a.startsWith("javascript:")?window.location.href=a:e.trigger("click")));return!1},y=function(a){a.preventDefault();a.stopPropagation()};e.on("removeTooltip",n);if(document.touchMode)this.addEventListener(TOUCH_START,s),this.addEventListener(TOUCH_END,y),this.addEventListener("click",y);else e.on({"focus mouseenter":x,"blur mouseleave":n,click:g})})};b.fn.addTooltip.defaults={delay:50,className:"hint",stay:2E3,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.loadImages=function(a){a=b.extend({},b.fn.loadImages.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector).eq(0)||c.children().eq(0);if(d.length&&c.is(":visible")&&d.is(":visible")){var e=d.find("img."+a.loadClass);if(e.length){var f="absolute"===d.css("position"),k=-(typeof a.left!==UNDEF?a.left:d.position().left-(f?0:c.scrollLeft()))-a.d,h=-(typeof a.top!==UNDEF?a.top:d.position().top-(f?0:c.scrollTop()))-a.d,q=d.offset().left,m=d.offset().top,r=(f?c.width():
b(window).width())+2*a.d,l=(f?c.height():b(window).height())+2*a.d,p,n,g,u,v,t=0;e.each(function(){n=b(this);p=n.parent();if(v=n.data("src"))u=p.offset().left-q,g=p.offset().top-m,g<h+l&&u<k+r&&g+p.outerHeight()>h&&u+p.outerWidth()>k&&(b("<span>",{"class":a.wait}).appendTo(p),n.hide().on("load",function(){b(this).fadeIn().siblings("."+a.wait).remove()}).attr({src:v}).removeClass(a.loadClass),t++)})}}})};b.fn.loadImages.defaults={selector:".load",loadClass:"toload",wait:"wait",d:80}})(jQuery);
(function(b){b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var c,d=b(this),e=d.parent(),f,k,h,q,m,r,l,p,n=0,g,u,v,t,x,s,y;d.css({position:"absolute",width:e.width-20});e.css({overflow:"hidden"});"absolute"!==e.css("position")&&e.css({position:"relative"});f=b("<div>",{"class":a.upbtn}).appendTo(e);k=b("<div>",{"class":a.dnbtn}).appendTo(e);h=b("<div>",{"class":a.scbar}).appendTo(e);q=b("<div>").appendTo(h);m=f.add(k).add(h);m.hide();var w=function(){return d.position().top},
A=function(a){return Math.round((h.height()-6)*-(null==a?w():a)/r)+3},B=function(){return Math.max(Math.round((h.height()-6)*l/r),a.dragMinSize)},z=function(b){null==b&&(b=w());f.css({opacity:b?1:a.disabledOpacity});k.css({opacity:b===l-r?a.disabledOpacity:1})},D=function(){return!1},C=function(){var a=r,b=l;r=d.height();l=e.height();e.scrollTop()&&(d.css({top:-e.scrollTop()}),e.scrollTop(0));if(a!==r||b!==l)r<=l?(d.css({top:0}).off("selectstart",D),m.hide()):(d.position().top<l-r&&d.css({top:l-r}),
q.css({top:A(),height:B()}),d.on("selectstart",D),m.show(),z()),e.loadImages()},E=function(b){clearInterval(p);l>=r||(b=Math.minMax(l-r,Math.round(b),0),q.stop(!0,!1).animate({top:A(b)},a.speed,a.effect),d.stop(!0,!1).animate({top:b},a.speed,a.effect,function(){z(b)}),e.loadImages({top:b}))};f.on("click",function(){E(w()+l);return!1});k.on("click",function(){E(w()-l);return!1});h.on("click",function(a){a.pageY<q.offset().top?E(w()+l):a.pageY>q.offset().top+q.height()&&E(w()-l);return!1});if(a.enableMouseWheel)d.on("mousewheel",
function(b,c){c&&(clearTimeout(p),q.stop(!0,!0),d.stop(!0,!0),E(w()+a.wheelIncr*(0>c?-1:1)));return!1});var G=function(a){a.preventDefault();q.css({top:Math.minMax(2,Math.round(a.pageY-q.data("my")),h.height()-q.height()-2)});d.css({top:Math.minMax(l-r,-Math.round((q.position().top-3)*r/(h.height()-6)),0)});z();e.loadImages();return!1},J=function(a){a.preventDefault();b(document).off("mousemove",G).off("mouseup",J);return!1};q.on("mousedown",function(a){a.preventDefault();b(this).data("my",Math.round(a.pageY)-
b(this).position().top);b(document).on({mousemove:G,mouseup:J});return!1});var M=function(a){return n=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:n},S=function(){s+=Math.round(x/20);var a=t+s;0<a||a<y?(clearInterval(p),e.loadImages()):(d.css({top:a}),q.css({top:A(),height:B()}),x*=0.8,10>Math.abs(x)&&(x=0,clearInterval(p),e.loadImages()))},K=function(a){a.preventDefault();if(u){if(a=M(a)-u)d.data("dragOn",!0),d.css({top:Math.minMax(y,g+a,0)}),q.css({top:A(),height:B()})}else u=
M(a);return!1},N=function(a){a.preventDefault();t=w();a=M(a)-u;var c=(new Date).getTime()-v;x=1E3*a/c;p=setInterval(S,50);document.touchMode?(this.removeEventListener(TOUCH_MOVE,K),this.removeEventListener(TOUCH_END,N)):b(document).off({mousemove:K,mouseup:N});setTimeout(function(){d.data("dragOn",!1)},20);e.loadImages();return 4>Math.abs(a)&&300>c},O=function(c){var e=c.target.nodeName;if("INPUT"===e||"TEXTAREA"===e||"BUTTON"===e||"SELECT"===e)return!0;c.preventDefault();if(d.data("dragOn"))return N(c),
!0;if(c.target.scrollHeight-1>c.target.clientHeight||a.dontDrag&&(b(c.target).is(a.dontDrag).length||b(c.target).parents(a.dontDrag).length)||l>=r||("touchstart"===c.type||"touchmove"===c.type)&&(!c.touches||1<c.touches.length||d.is(":animated")))return!0;q.stop(!0,!0);d.stop(!0,!0);clearInterval(p);g=w();u=M(c);v=(new Date).getTime();s=0;y=l-r;if(document.touchMode)return b(c.target).closest("a").focus(),this.addEventListener(TOUCH_MOVE,K),this.addEventListener(TOUCH_END,N),!0;b(document).on({mousemove:K,
mouseup:N});return!1};if(document.touchMode)d[0].addEventListener(TOUCH_START,O);else d.on("mousedown",O);b(window).on("resize",function(){clearTimeout(c);c=setTimeout(C,50)});c=setTimeout(C,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||C()},a.refresh);d.attr("role","scroll").data("dragOn",!1).on("adjust",C);m.on("selectstart",D);O=function(){if(!d.data("dragOn")){var a=b(this).parent()===d?b(this):b(this).parent(),c=a.position().top,a=a.outerHeight(!0),h=d.position().top,
f=e.height();if(!(f>d.height())){if(c+a>f-h)h=Math.max(f-a-c,f-d.height());else if(c<-h)h=-c;else return;E(h)}}};if(a.focusActive)d.find("a").on("setactive",O);d.find("a").on("click",function(a){return d.data("dragOn")?(a.preventDefault(),!1):!0});if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(document).on("keydown",function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return c.preventDefault(),
E(w()+l),!1;case 34:return c.preventDefault(),E(w()-l),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,focusActive:!0,refresh:0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutBack:function(a,b,d,e,f,k){null==k&&(k=1.70158);return e*((b=b/f-1)*b*((k+1)*b+k)+1)+d}});b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var c=b(this),d=c.parent(),e=0,f,k,h,q,m,r,l,p,n,g=b("<div>",{"class":a.scleft}).insertAfter(d),u=b("<div>",{"class":a.scright}).insertAfter(d),v=function(b){b=null==b?c.position().left:b;g.css({opacity:0>b?1:a.disabledOpacity});u.css({opacity:d.width()<b+c.width()?
1:a.disabledOpacity})},t=function(e){var h=d.width(),f=c.width();h&&f&&!(h>=f)&&b.isNumeric(e)&&(0<e?e=0:e<h-f&&(e=h-f),v(e),c.stop(!0,!1),clearInterval(p),c.animate({left:e},a.speed,a.effect),d.loadImages({left:e}))};g.on("click",function(a){a.preventDefault();x();t(c.position().left+d.width());return!1});u.on("click",function(a){a.preventDefault();x();t(c.position().left-d.width());return!1});var x=function(b){"number"===typeof n&&clearTimeout(n);n=typeof b!==UNDEF?b:setTimeout(function(){n=!1},
a.seekStay)};c.on("setactive",function(){if(!c.data("dragOn")&&!n){var b=c.find(a.active).closest("li");if(b.length){var e=b.position().left,b=b.outerWidth(!0),h=Math.round(b*a.headRoom),f=c.position().left,k=d.width();if(!(k>c.width())){if(e>k-b-h-f)f=Math.max(k-b-h-e,k-c.width());else if(e<-f+h)f=-e+h;else return;t(f)}}}});var s=function(a,b){a.preventDefault();b&&(c.stop(!0,!1),clearInterval(p),x(),t(c.position().left+d.width()*(0>b?-1:1)));return!1};if(a.enableMouseWheel)c.on("mousewheel",s);
v();var y=function(a){return e=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:e},w=function(){r+=Math.round(m/20);var a=q+r;0<a||a<l?clearInterval(p):(c.css({left:a}),m*=0.8,10>Math.abs(m)&&(m=0,clearInterval(p)))},A=function(a){a.preventDefault();if(k){if(a=y(a)-k)c.data("dragOn",!0),c.css({left:Math.minMax(l,f+a,0)})}else k=y(a);return!1},B=function(a){a.preventDefault();q=c.position().left;var e=y(a)-k,f=(new Date).getTime()-h;m=1E3*e/f;p=setInterval(w,50);x();document.touchMode?
(c[0].removeEventListener(TOUCH_MOVE,A),c[0].removeEventListener(TOUCH_END,B),10>Math.abs(e)&&b(a.target).parents("a").trigger("click")):b(document).off({mousemove:A,mouseup:B});setTimeout(function(){c.data("dragOn",!1)},20);d.loadImages();return 4>Math.abs(e)&&300>f},s=function(a){a.preventDefault();if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;c.stop(!0,!1);clearInterval(p);x(!0);f=c.position().left;k=y(a);h=(new Date).getTime();r=
0;l=d.width()-c.width();if(0<=l)return!0;if(document.touchMode)b(a.target).closest("a").focus(),c[0].addEventListener(TOUCH_MOVE,A),c[0].addEventListener(TOUCH_END,B);else b(document).on({mousemove:A,mouseup:B});return!1};if(document.touchMode)c[0].addEventListener(TOUCH_START,s);else c.on("mousedown",s);c.attr("role","scroll").data("dragOn",!1);c.add(g).add(u).on("selectstart",noAction);d.loadImages()})};b.fn.scrollThumbs.defaults={active:".active",scleft:"scleft",scright:"scright",seekStay:3E3,
speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutCubic:function(a,b,d,e,f){return e*((b=b/f-1)*b*b+1)+d}});b.fn.addSwipe=function(a,c,d){d=b.extend({},b.fn.addSwipe.defaults,d);return this.each(function(){var e=b(this),f=e.parent(),k=this,h=0,q=0,m=f.outerWidth(),r=f.outerHeight(),l=e.outerWidth(),p=e.outerHeight(),n,g,u,v,t,x,s,y,w=function(){m=f.outerWidth();r=f.outerHeight()};b(window).on("resize.addswipe",function(){clearTimeout(g);g=setTimeout(w,50)});var A=function(a){if(k.dragOn)return!1;a.target.trigger("click",
a)},B=function(a){y?(x=(a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX)-v,e.translate(h+x,0)):(a.touches&&0<a.touches.length?(x=a.touches[0].clientX-v,s=a.touches[0].clientY-t):null!==a.clientX&&(x=a.clientX-v,s=a.clientY-t),e.translate(h+x,q+s))},z=function(a){K();k.removeEventListener(TOUCH_MOVE,C);k.removeEventListener(TOUCH_END,z);return!1},D=function(a){a.preventDefault();K();b(document).off("mousemove.addswipe mouseup.addswipe");return!1},C=function(a){a.preventDefault();B(a);
return!1},E=function(a){a.preventDefault();B(a.originalEvent);return!1},G=function(a){if(a.touches){if(1<a.touches.length)return!0;v=a.touches[0].clientX;t=a.touches[0].clientY}else v=a.clientX,t=a.clientY;S();k.addEventListener(TOUCH_MOVE,C);k.addEventListener(TOUCH_END,z);return!0},J=function(a){v=a.originalEvent.clientX;t=a.originalEvent.clientY},M=function(a){a.preventDefault();J(a);S();e.on("click.addswipe",A);b(document).on({"mousemove.addswipe":E,"mouseup.addswipe":D});return!1},S=function(){e.removeClass("smooth");
k.dragOn=!0;u=(new Date).getTime();m=m||f.outerWidth();l=e.outerWidth();p=e.outerHeight();y=p<=r;h=e.data("tr_x")||0;q=y?0:e.data("tr_y")||0;x=s=0;n=l>m?Math.round((l-m*(1-d.oversizeTreshold))/2):0},K=function(){if(y&&!n&&Math.abs(x)<d.treshold)k.dragOn=null,e.translate(0,0),e.trigger("click");else{var f=(new Date).getTime()-u,g=h+x+300*x/f;e.translate(g,y?0:q+s+300*s/f,"smooth");g<-n?b.isFunction(a)&&a.call(k):g>n&&b.isFunction(c)&&c.call(k)}setTimeout(function(){k.dragOn=null},100);return!1};e.attr("draggable",
"true");if(document.touchMode)k.addEventListener(TOUCH_START,G);else e.on({"dragstart.addswipe":M,"mousedown.addswipe":J});e.on("dragcancel.addswipe",function(){setTimeout(function(){k.dragOn=null},20);e.translate(0,0,"smooth");return!1});e.on("unswipe.addswipe",function(){setTimeout(function(){k.dragOn=null},20);e.removeAttr("draggable");document.touchMode?(k.removeEventListener(TOUCH_MOVE,C),k.removeEventListener(TOUCH_END,z),k.removeEventListener(TOUCH_START,G)):(e.off(".addswipe"),b(document).off(".addswipe"))});
e.on("selectstart.addswipe",noAction)})};b.fn.addSwipe.defaults={treshold:40,oversizeTreshold:0.2,margin:15}})(jQuery);
(function(b){b.fn.alignTo=function(a,c){c=b.extend({},b.fn.alignTo.defaults,c);"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){var d=a.offset(),e=a.outerWidth(),f=a.outerHeight(),k=b(window).width(),h=b(window).height();return b(this).each(function(){var a=b(this);a.css("maxHeight","none");var m=a.outerWidth(),r=a.outerHeight(),l=Math.round(d.left+c.pos[2]*e/2+(c.pos[2]-1)*c.gap),p=Math.round(d.top+c.pos[3]*f/2+(c.pos[3]-1)*c.gap),l=Math.round(l-c.pos[0]*m/2),p=Math.round(p-c.pos[1]*r/
2);if(0>p||p+r>h)1!==c.pos[2]?p=2*p+r>h?h-r:0:0===c.pos[3]?h>2*d.top+f&&(p=d.top+f+c.gap):2===c.pos[3]&&h<2*d.top+f&&(p=Math.max(0,d.top-r-c.gap)),0>p&&(p=0),p+r>h&&a.css({overflow:"auto",maxHeight:h-p-(parseInt(a.css("paddingTop"),10)+parseInt(a.css("paddingBottom"),10))});if(0>l||l+m>k)1!==c.pos[3]?l=2*l+m>k?k-m:0:0===c.pos[2]?k>2*d.left+e&&(l=d.left+e+c.gap):2===c.pos[2]&&k<2*d.left+e&&(l=Math.max(0,d.left-m-c.gap)),0>l&&(l=0),l+m>k&&a.css({overflow:"auto",maxWidth:k-l-(parseInt(a.css("paddingLeft"),
10)+parseInt(a.css("paddingRight"),10))});a.css({position:"absolute",left:l,top:p})})}};b.fn.alignTo.defaults={gap:5,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.addPlayer=function(a){if(typeof b.fn.jPlayer!==UNDEF){a=b.extend({},b.fn.addPlayer.defaults,a);var c=getTranslations(b.fn.addPlayer.text),d=0<=navigator.userAgent.indexOf("Firefox")&&0<=navigator.platform.indexOf("Mac"),e={cont:"jp-cont",mini:"jp-mini",audio:"jp-audio",video:"jp-video",playerType:"jp-type-single",player:"jp-jplayer",title:"jp-title",progress:"jp-progress",controls:"jp-controls-holder",startStop:"jp-startstop",volume:"jp-volume",times:"jp-times",toggles:"jp-toggles",
warning:"jp-warning",videoPlay:"jp-video-play",play:"jp-play",pause:"jp-pause",stop:"jp-stop",seekBar:"jp-seek-bar",playBar:"jp-play-bar",mute:"jp-mute",unmute:"jp-unmute",volumeBar:"jp-volume-bar",volumeBarValue:"jp-volume-bar-value",volumeMax:"jp-volume-max",currentTime:"jp-current-time",duration:"jp-duration",fullScreen:"jp-full-screen",restoreScreen:"jp-restore-screen",repeat:"jp-repeat",repeatOff:"jp-repeat-off",gui:"jp-gui",noSolution:"jp-no-solution",playing:"playing"},f=function(a){var b,
d=function(a){return'<a class="'+e[a]+'" title="'+c[a]+'">'+c[a]+"</a>"};b='<div class="'+e.progress+'"><div class="'+e.seekBar+'"><div class="'+e.playBar+'"></div></div></div>';b+='<div class="'+e.controls+'">';b+='<div class="'+e.startStop+'">'+d("play")+d("pause")+d("stop")+"</div>";b+='<div class="'+e.volume+'">'+d("mute")+d("unmute")+'<div class="'+e.volumeBar+'"><div class="'+e.volumeBarValue+'"></div></div></div>';b+='<div class="'+e.times+'"><div class="'+e.currentTime+'"></div><div class="'+
e.duration+'"></div></div>';b+='<div class="'+e.toggles+'">'+(a?"":d("fullScreen")+d("restoreScreen"))+d("repeat")+d("repeatOff")+"</div>";return b+"</div>"},k=function(a,d,h){"absolute"!==a.css("position")&&"fixed"!==a.css("position")&&a.css({position:"relative"});a.css({overflow:"hidden"});var k,g=b('<div class="'+(h?e.audio:e.video)+'"></div>').appendTo(a),g=b('<div class="'+e.playerType+'"></div>').appendTo(g);k=b('<div class="'+e.player+'"></div>').appendTo(g);g.append('<div class="'+e.videoPlay+
'"><a>'+c.play+"</a></div>");d&&g.append('<div class="'+e.title+'"><ul><li>'+d+"</li></ul></div>");g.append('<div class="'+e.gui+'">'+f(h)+"</div>");g.find("."+e.gui+" a").attr("href",NOLINK);!document.touchMode&&a.hasClass(e.fullScreen)&&g.find("."+e.gui).hide();a.append('<div class="'+e.noSolution+'">'+c.unsupportedMediaFormat+"</div>");d=a.css("paddingTop");h=a.css("paddingLeft");var g=a.css("paddingRight"),m=a.css("paddingBottom");a.find("."+e.gui).css({bottom:m,left:h,right:g});a.find("."+e.title).css({top:d,
left:h,right:g});return k},h=function(){var a;(a=b(this).data("media"))&&a.jPlayer("pause");return!1},q=function(){var a;(a=b(this).data("media"))&&a.jPlayer("destroy");b(window).off("keydown",p);return!1},m=function(){var a;(a=b(this).data("media"))&&a.jPlayer("stop");return!1},r=function(){var a;(a=b(this).data("media"))&&a.jPlayer("play");return!1},l=b(this).eq(0),p=function(a){return!document.activeElement||"INPUT"!==document.activeElement.nodeName&&"TEXTAREA"!==document.activeElement.nodeName?
32===(a?a.keyCode:window.event.keyCode)?(l.find("."+e.player).jPlayer(l.data(e.playing)?"pause":"play"),!1):!0:!0},n=function(b){return a.hasOwnProperty("audio")?a.audio:0<".mp3.m4a.f4a.rtmpa".indexOf(b.getExt())},g=function(){b("."+e.cont).each(function(){if(b(this).data(e.playing))return!0});return!1},u=function(a){var b=n(a)?"a":"v";switch(a.getExt()){case "mp3":a="mp3";break;case "mp4":a="m4"+b;break;case "ogg":a="og"+b;break;case "webm":a="webm"+b;break;case "flv":case "f4a":case "f4v":a="fl"+
b;break;case "rtmp":a="rtmp"+b;break;default:a=null}return a};return this.each(function(){var f=b(this),l,x,s,y=a.folder||"",w,A,B,z,D,C=0;a.elem?(z=b(this).find(a.elem),A=z.attr("href"),s=z.attr("title"),l=z.find("img:first"),l.length?(B=l.attr("src"),s||(s=l.attr("alt"))):B=s=""):(A=a.src,s=a.title||"",B=a.poster||"",z=b('<a href="'+A+'"'+(s?' title="'+s+'"':"")+">"+(B?'<img src="'+B+'">':"")+"</a>").appendTo(b(this)));if(LOCAL){var E=b('<div class="'+e.warning+'">'+c.localFlashWarning+"</a></div>").appendTo(z);
z.css("position","relative");E.hide();setTimeout(function(){E.fadeIn()},2E3)}if(A){!a.auto||a.lowPriority||g();0<A.indexOf("::")?(A=A.split("::"),l=n(A[0]),x=u(A[0])):(l=n(A),x=u(A));this.id||(this.id=a.id+b.fn.addPlayer.id++);w="#"+this.id;b(f).addClass(e.cont);a.mini&&b(f).addClass(e.mini);D=k(f,a.showTitle?s:"",l);var G=function(){var c={},d,e,h=a.relativeUrl?"":location.href.substring(0,location.href.lastIndexOf("/")+1);b.isArray(A)?(C>=A.length&&(C=0),d=A[C]):(d=A,B&&(c.poster=(h+y+B).fixUrl()));
e=u(d);c[e]=(h+y+d).fixUrl();return c},J=function(){if(b.cookie){var a=f.find("."+e.currentTime).text().split(":"),a=2<a.length?60*(60*parseInt(a[0],10)+parseInt(a[1],10))+parseInt(a[2],10):60*parseInt(a[0],10)+parseInt(a[1],10);b.cookie("jp_"+f[0].id,(f.data(e.playing)?"1":"0")+"::"+a+"::"+D.jPlayer("option","volume").toString().substring(0,5)+(C!==UNDEF?"::"+C:""))}};s=!l&&!d;f.on("setEndedFn",function(c,d){d&&b.isFunction(d)?a.ended=d:a.ended=null});D.jPlayer({cssSelectorAncestor:w,backgroundColor:a.backgroundColor,
supplied:x,swfPath:a.resPath+"/"+a.swf,solution:a.solution,size:{width:"100%",height:"100%"},fullWindow:!l&&a.fullScreen,preload:"auto",loop:a.loop,volume:a.volume,autohide:{restored:s,full:s},ready:function(){var c=b(this),d;if(a.saveStatus)a:{if(b.cookie&&(d=b.cookie("jp_"+f[0].id))){d=d.split("::");d={playing:"1"===d[0],time:parseInt(d[1]||0,10),volume:parseFloat(d[2]||0.8),curr:parseInt(d[3]||0,10)};break a}d=null}else d=null;f.data("media",c);a.saveStatus&&(b(window).on("unload",J),d&&(C=d.curr));
var e=G();z&&z.hide();c.jPlayer("setMedia",e);f.on({play:r,pause:h,stop:m,destroy:q});a.saveStatus&&d?(c.jPlayer("volume",d.volume),c.jPlayer(d.playing?"play":"pause",d.time)):a.auto&&!document.touchMode&&c.jPlayer("play");if(!a.lowPriority)b(window).on("keydown",p)},play:function(){b(this).jPlayer("pauseOthers");f.data(e.playing,!0);document.touchMode&&settimeout(function(){f.find("."+e.title).fadeOut(1E3)},600)},pause:function(){f.data(e.playing,!1)},stop:function(){f.data(e.playing,!1);document.touchMode&&
f.find("."+e.title).fadeIn(300)},ended:function(){b.isArray(A)&&(C+1<A.length||a.loop)?(C=(C+1)%A.length,b(this).jPlayer("setMedia",G()),a.auto&&b(this).jPlayer("play")):(f.data(e.playing,!1),b.isFunction(a.ended)&&a.ended.call())}})}})}};b.fn.addPlayer.id=0;b.fn.addPlayer.defaults={id:"jp_container_",backgroundColor:"#000000",resPath:"",swf:"Jplayer.swf",relativeUrl:!1,solution:"html,flash",volume:0.8,auto:!1,loop:!1,keyboard:!0,lowPriority:!1,saveStatus:!1,mini:!1,fullScreen:!1,showTitle:!1,size:{width:"100%",
height:"100%"}};b.fn.addPlayer.text={play:"play",pause:"pause",stop:"stop",mute:"mute",unmute:"unmute",fullScreen:"full screen",restoreScreen:"restore screen",repeat:"repeat",repeatOff:"repeat off",localFlashWarning:"Local Flash playback is possibly blocked by Flash security rules. Test videos in the uploaded album!",unsupportedMediaFormat:'<span>Unsupported media format</span>You might need to either update your browser or the <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a> or use another browser to play this media.'}})(jQuery);
(function(b){b.getLatLng=function(a){return typeof google===UNDEF||null==a?null:"string"===typeof a?(a=a.split(","),new google.maps.LatLng(parseFloat(a[0])||0,parseFloat(a[a.length-1])||0)):new google.maps.LatLng(a[0],a[1])};b.fn.addMap=function(a){if(typeof google===UNDEF||!google.maps)return this;a=b.extend({},b.fn.addMap.defaults,a);var c=a.resPath+"/marker-curr.png",d=a.resPath+"/marker.png",e=new google.maps.MarkerImage(c,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,
24)),f=new google.maps.MarkerImage(d,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),k=new google.maps.MarkerImage(a.resPath+"/marker-shadow.png",new google.maps.Size(24,24),new google.maps.Point(0,0),new google.maps.Point(8,24));return this.each(function(){var h=b(this),q,m,r,l,p,n,g=[],u;h.readData(a,"type,zoom,map,label,resPath,markers");var v=function(){h&&h.data("fresh")&&(r&&h.is(":visible")&&!h.parents(":hidden").length&&h.width()&&h.height()?(clearTimeout(p),
h.width(h.parent().width()),google.maps.event.trigger(r,"resize"),r.setCenter(q),h.data("fresh",!1)):p=setTimeout(v,200))};l&&l.length&&l.remove();l=b("<div>").css({position:"absolute",top:"-9000px",width:h.width(),height:h.height()}).appendTo("body");h.data("fresh",!0).on({adjust:v,destroy:function(){r.getParentNode().removeChild(r);b(window).off("resize",v)}});if(a.markers&&a.markers.length&&null!=a.curr)q=a.markers[a.curr].map;else if(a.map)q=b.getLatLng(a.map),m=a.label;else return;null!==(n=
b.cookie("mapType"))&&(a.type=n);null!==(n=b.cookie("mapZoom"))&&(a.zoom=parseInt(n,10)||a.zoom);setTimeout(function(){var n,p=new google.maps.Map(l[0],{zoom:a.zoom,center:q,scrollwheel:!1,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(p,"maptypeid_changed",function(){b.cookie("mapType",b.fn.addMap.defaults.type=p.getMapTypeId(),3600)});google.maps.event.addListener(p,"zoom_changed",function(){b.cookie("mapZoom",b.fn.addMap.defaults.zoom=p.getZoom(),3600)});if(a.markers&&1<a.markers.length){var s,
v,w=Math.max(a.curr-a.range,0),A=Math.min(a.curr+a.range,a.markers.length),B=function(){a.click.call(this)};for(s=w;s<A;s++)v=a.markers[s],n={position:v.map,map:p,title:v.label,icon:s===a.curr?e:f,shadow:k,zIndex:s===a.curr?999:s},n=new google.maps.Marker(n),b.isFunction(a.click)&&v.link&&(n.link=v.link,google.maps.event.addListener(n,"click",B)),g.push(n)}else n=new google.maps.Marker(b.extend({position:q,map:p,title:m},c));l.css({top:0}).appendTo(h);r=p;u=a.curr;h.on("setactive",function(a,e){b.isArray(g)&&
g.length&&(u>=w&&(g[u].setIcon(d),g[u].setZIndex(u)),typeof e!==UNDEF&&e>=w&&e<w+g.length?(g[e-w].setIcon(c),g[e-w].setZIndex(9999),r.setCenter(g[e-w].position),u=e):u=-1)})},20);b(window).on("resize",function(){clearTimeout(p);h.data("fresh",!0);p=setTimeout(v,100)})})};b.fn.addMap.defaults={type:"roadmap",zoom:16,range:30,resPath:""}})(jQuery);
(function(b){b.fn.fullScreen=function(a){var b=function(a,b){b="FullScreen"===b&&"webkit"===VEND?VEND+"Is"+b:VEND&&VEND+b||b.substr(0,1).toLowerCase()+b.substr(1);return"function"===typeof a[b]?a[b]():a[b]};return typeof a===UNDEF?b(this[0],"FullScreen"):this.each(function(){var d=b(this,"FullScreen");a?d||b(this,"RequestFullScreen"):d&&b(this,"CancelFullScreen")})}})(jQuery);
var xDecrypt=function(b){if("String"===!typeof this)return"";var a=[147,163,87,254,153,4,198,23],c=b.length,d=5*Math.ceil(c/8),e=Array(d),f="",k,h=0,q,m;for(k=0;k<d;k++)e[k]=0;for(k=0;k<c;k++)9<(m=b.charCodeAt(k)-48)&&(m-=7),m<<=11-h%8,q=Math.floor(h/8),q<d&&(e[q]|=m>>8,++q<d&&(e[q]|=m&255)),h+=5;for(k=0;k<d;k++)e[k]^=a[k%8];d=e[0]|e[1]<<8;m=0;for(k=4;k<d;k++)f+=String.fromCharCode(e[k]),m+=e[k];m!=(e[2]&255|e[3]<<8)&&(f="");return f};
(function(b){b.fn.addShop=function(a,c){c=b.extend({},b.fn.addShop.defaults,c);if(!a||!a.length||!c.id)return this;var d=b.fn.addShop.id,e=b.fn.addShop.text,f=c.id.replace("|","@"),k=DEBUG?b.fn.addShop.st.sandboxurl:b.fn.addShop.st.url,h=b.fn.addShop.st.curr_symbol[c.currency]||c.currency,q=b(this).eq(0),m,r,l=a.length,p,n,g=1<l?b.fn.addShop.st.targetCart:b.fn.addShop.st.target,u,v=function(a,c){var d,e=b("<select>").appendTo(a);for(d=0;d<c.length;d++)e.append(b("<option>",{val:c[d].price,html:c[d].text}));
return e},t=function(a,c,d,e,h){if(!a||!c)return{};a=b("<input>",{type:e||"text"}).appendTo(a);a.prop("name",c);d&&a.val("string"===typeof d?d.stripQuote():d);h&&a.prop(h,!0);return a},x=function(a){if(typeof a===UNDEF)return w(1<l?d.discountRateCart:d.discountRate);1<l?w(d.discountRateCart,a):(w(d.discountRate,a),w(d.discountRate+"2",a))},s=function(a){if(typeof a===UNDEF)return w(1<l?d.discountAmountCart:d.discountAmount);w(1<l?d.discountAmountCart:d.discountAmount,a)},y=function(a,b){var c=r.children("[name="+
d.option+"]");if(c&&c.length){var e=c.val().replace(/(\s\(CC\:.+\))$/,"");c.val(e+" (CC:"+a+(typeof b!==UNDEF?"="+b:"")+")")}},w=function(a,b){var c=r.children("[name="+a+"]");if(typeof b===UNDEF)return c&&c.length?parseFloat(c.val()):null;null==b?c.remove():c&&c.length?c.val(b):t(r,a,b,"hidden")},A=function(){var a=m.children("select").eq(0);return a&&a.length?a.prop("selectedIndex"):0},B=function(){var a=A(),c=m.children(".discount").eq(0),d=m.children(".total").eq(0),e=m.children("[name=copies]").val()||
1,f=u[a].price,a=u[a].shipping+(e-1)*u[a].shipping2,k=s(),g=x();c.length||(c=b("<span>",{"class":"discount"}).insertAfter(m.children("select")));k&&0<k?(c.show().html("- "+h+" "+k.toFixed(2)),d.html(h+" <b>"+(l*(e*f+a)-k).toFixed(2)+"</b>")):g&&0<g?(c.show().text("-"+g+"%"),d.html(h+" <b>"+(l*(e*f*(100-g)/100+a)).toFixed(2)+"</b>")):(c.hide(),d.html(h+" <b>"+(l*(e*f+a)).toFixed(2)+"</b>"))},z=function(){var a=A(),b=m.children("[name=copies]").val()||1,e=u[a].price,h=u[a].shipping,f=u[a].shipping2;
c.quantityCap&&b>c.quantityCap&&m.children("[name=copies]").val(b=c.quantityCap);if(1<l)for(var k=1;k<=l;k++)w(d.price+"_"+k,e),w(d.copies+"_"+k,b),w(d.shipping+"_"+k,h?h:null),w(d.shipping2+"_"+k,f?f:null);else w(d.price,e),w(d.copies,b),w(d.shipping,h?h:null),w(d.shipping2,f?f:null);w(d.option,u[a].text);B()},D=function(a){var d,f=new Date,k;a=!0===a;if(c.coupons&&(d=m.children("[name=coupon]"))&&(k=d.val().trim()).length){var g,n,r=xDecrypt(c.coupons).split("::");for(g=0;g<r.length;g++)if(n=r[g].split(/=|\s*<\s*/),
n[0]===k&&1<n.length&&(d=parseFloat(n[1]),!(0.01>d))){if(2<n.length){var q=n[2].split(/-|:|\//);2>q.length&&(q[1]=1);3>q.length&&(q[2]=1);if(new Date(parseInt(q[0]),parseInt(q[1]),parseInt(q[2]))<f)return b("body").addModal(b("<div>",{html:e.expired.replace("{0}",k)}),{type:"error"}),!1}if("%"===n[1].charAt(n[1].length-1)){if(99<d||1>d)continue;g=x();g>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",g+"%")}),{type:"warning"}):(a&&b("body").addModal(b("<div>",{html:e.accepted.replace("{0}",
d+"%")}),{title:e.success}),x(d),y(k,d+"%"),b.cookie("discountRate",k,86400))}else b.cookie("discount_"+k)?(a&&b("body").addModal(b("<div>",{html:e.reclaimed}),{type:"warning"}),s(null),p&&(x(p),y(k,p+"%"))):(g=x(),f=u[A()].price,g=s()||(0<g?l*f*g/100:0),f*l<d?a&&b("body").addModal(b("<div>",{html:e.higherThanPrice.replace("{0}",h+"&nbsp;"+d)}),{type:"warning"}):g>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",h+"&nbsp;"+g.toFixed(2))}),{type:"warning"}):(a?b("body").addModal(b("<div>",
{html:e.accepted.replace("{0}",h+"&nbsp;"+d)}),{title:e.success}):(b.cookie("discount_"+k,d,86400),p=x(),x(null)),s(d),y(k,c.currency+" "+d)));B();return!0}b("body").addModal(b("<div>",{html:e.noSuch}),{type:"error"});return!1}return!0};u=function(a){a=a.split("::");var b,c,d,e,f=[];for(b=0;b<a.length;b++)c=a[b].split("="),1<c.length&&(e={},e.label=c[0],d=c[1].split("+"),null!=(e.price=parseFloat(d[0]))&&(e.shipping=1<d.length?parseFloat(d[1]):0,e.shipping2=2<d.length?parseFloat(d[2]):e.shipping,
e.text=c[0]+" = "+h+" "+e.price.toFixed(2)+(1<d.length?"+"+e.shipping.toFixed(2):""),f.push(e)));return f}(c.options);if(u.length){m=b("<form>",{name:"shopping",method:"post"}).appendTo(q);1<l&&m.append(b("<span>",{"class":"count",html:"<b>"+l+"</b> &times;"}));n=v(m,u);n.on("change",z);c.hasOwnProperty("discount")||(c.discount=b.fn.addShop.defaults.discount||0);"-"===c.discount&&(c.discount=0);1!==c.quantityCap&&(m.append("&times;"),n=t(m,"copies",1),n.addClass("copies").on("change",z));m.append("=");
m.append(b("<span>",{"class":"total"}));c.coupons&&(m.append(b("<input>",{type:"text",name:"coupon","class":"coupon",placeholder:e.couponCode})),v=b("<a>",{href:NOLINK,html:"&nbsp;","class":"redeem"}).on("click",function(a){a.preventDefault();D(!0);return!1}),document.touchMode||v.addTooltip(e.redeem),m.append(v));r=b("<form>",{name:d.form,target:c.continueUrl?"_blank":g,action:k+"cgi-bin/webscr/",method:"post"}).appendTo(q);w("cmd","_cart");w("charset","utf-8");w("lc",c.locale);w(d.seller,f);w(d.currency,
c.currency);w(d.shopUrl,c.continueUrl||decodeURIComponent(window.location.href));null!=c.handling&&b.isNumeric(c.handling)&&w(d.handlingCart,c.handling);w(d.option,u[0].label);c.discount&&100>c.discount&&x(c.discount);if(1<l){w("upload",1);w(d.name,l+" "+e.items);var C;a.each(function(a){n=b(this).find("img:first");C=n.data("src")||n.attr("src")||"";w(d.name+"_"+(a+1),decodeURIComponent(C.getFile()+" ["+c.path+C.getDir().replace("thumbs/","")+"]"))})}else w("add",1),n=a.eq(0).find("img:first"),w(d.name,
decodeURIComponent((n.data("src")||n.attr("src")||"").getFile()+" ["+c.path+"]"));z();r.append(b("<button>",{id:"shopAdd",name:"submit","class":"paypalbtn",html:1<l?e.buyNow:e.addCart}));r.on("submit",function(a){var d=!0;a=b(a.target);c.coupons&&(d=D());d&&(a.parents("[role=modal]").trigger("destroy"),window.open("",g,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no"));return d});c.coupons&&(z=b.cookie("discountRate"))&&(b("input[name=coupon]").val(z),
D(!1));1===l&&(k=b("<form>",{"class":"view",name:"paypalview",target:g,action:k+"cgi-bin/webscr/",method:"post"}).appendTo(q),t(k,"cmd","_cart","hidden"),t(k,"lc",c.locale,"hidden"),t(k,d.seller,f,"hidden"),t(k,"display",1,"hidden"),k.append(b("<button>",{id:"shopView","class":"paypalbtn",name:"submit",html:e.viewCart})),k.on("submit",function(){window.open("",g,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");return!0}));B();return this}};
b.fn.addShop.defaults={currency:"EUR",locale:"US",quantityCap:0,shippingFlat:!1};b.fn.addShop.text=getTranslations({addCart:"Add to Cart",viewCart:"View Cart",buyNow:"Buy Now",items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",accepted:"The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",
higherThanPrice:"You can use this coupon only for items priced higher than <b>{0}</b>.",reclaimed:"This coupon has already been used!"});b.fn.addShop.st={target:"ShoppingCart",targetCart:"BuyNow",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",btn_lng:{DE:"de_DE",FR:"fr_FR",IT:"it_IT",ES:"es_ES",PT:"pt_PT",PT:"pt_BR",DA:"da_DK",NL:"nl_NL",NO:"no_NO",SV:"sv_SE",TR:"tr_TR",RU:"ru_RU",PL:"pl_PL",IL:"he_IL",TH:"th_TH"},curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",
HUF:"Ft"}};b.fn.addShop.id={form:"paypal",seller:"business",currency:"currency_code",name:"item_name",option:"item_number",custom:"custom",price:"amount",priceCart:"amount_1",copies:"quantity",discountRate:"discount_rate",discountRateCart:"discount_rate_cart",discountAmount:"discount_amount",discountAmountCart:"discount_amount_cart",shipping:"shipping",shipping2:"shipping2",handlingCart:"handling_cart",shopUrl:"shopping_url"}})(jQuery);
(function(b){b.fn.addSocial=function(a){a=b.extend({},b.fn.addSocial.defaults,a);var c=getTranslations(b.fn.addSocial.text),d=window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):""),e=encodeURIComponent(window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):"")),f=encodeURIComponent(a.title||b("meta[name=title]").attr("content")||b("title").text()),k=encodeURIComponent(c.checkOutThis),h=a.inline?90:a.width,q=a.image?window.location.href.getDir()+
a.image:b("link[rel=image_src]").attr("href");return this.each(function(){var m=b(this);"a"===this.nodeName&&m.attr("href",NOLINK);var r=b("<div>",{"class":a.className});if(LOCAL&&!DEBUG)r.html(c.localWarning);else{if(!LOCAL){if(!a.useHash){a.facebookLike&&r.append('<div class="likebtn"><iframe src="//www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width="+h+"&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=22" scrolling="no" frameborder="0" style="border:none;overflow:hidden;width:'+
h+'px;height:22px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&r.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html?url='+d+"&text="+f+'" style="width:'+h+'px; height:22px;"></iframe></div>');if(a.googlePlus){var l=a.inline?90:120,p=b('<div class="likebtn" style="max-width:'+l+"px;min-width:"+l+'px;"><div class="g-plusone" data-href="'+d+'"></div></div>').appendTo(r),n=20,g=function(){typeof gapi===
UNDEF?n--?setTimeout(g,200):typeof console!==UNDEF&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi.plusone.render(p[0],{size:"medium",annotation:"bubble"})},200)};g()}a.pinItBtn&&r.append('<div class="likebtn" style="height:22px;"><a data-pin-config="beside" href="//pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(q)+"&description="+f+'" data-pin-do="buttonPin" ><img src="http://assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>')}a.tumblrBtn&&
r.append('<div class="likebtn" id="tumblr"><a href="//www.tumblr.com/share/'+(a.image?"photo?source=":"link?url=")+encodeURIComponent(d)+"&name="+f+'" title="Share on Tumblr" style="display:inline-block;text-indent:-9999px;overflow:hidden;width:'+h+'px;height:22px;background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</a></div>')}if(a.facebook||a.twitter||a.gplus||a.pinterest||a.digg||a.delicious||a.myspace||a.stumbleupon||a.reddit||a.email)a.buttonLabels||
r.append("<span>"+c.shareOn+"</span>"),a.facebook&&r.append('<a href="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D='+e+"&p%5Bimages%5D%5B0%5D="+encodeURIComponent(q)+"&p%5Btitle%5D="+f+'" class="facebook"'+(a.buttonLabels?">Facebook":' title="Facebook">')+"</a>"),a.twitter&&r.append('<a href="http://twitter.com/home?status='+k+": "+e+'" class="twitter"'+(a.buttonLabels?">Twitter":' title="Twitter">')+"</a>"),a.gplus&&r.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+
e,title:"Google+",text:a.buttonLabels?"Google+":""}).on("click",function(){window.open(this.href,this.title,"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=760,width=980");return!1})),a.pinterest&&r.append('<a href="http://pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(q)+"&description="+f+'" class="pinterest"'+(a.buttonLabels?">Pinterest":' title="Pinterest">')+"</a>"),a.digg&&r.append('<a href="http://digg.com/submit?url='+d+'" class="digg"'+(a.buttonLabels?">Digg":
' title="Digg">')+"</a>"),a.delicious&&r.append('<a href="http://delicious.com/save?url='+d+"&title="+f+'&v=5" class="delicious"'+(a.buttonLabels?">Delicious":' title="Delicious"')+"</a>"),a.myspace&&r.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+f+"&u="+d+'&l=3" class="myspace"'+(a.buttonLabels?">MySpace":' title="MySpace"')+"</a>"),a.stumbleupon&&r.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+f+'" class="stumbleupon"'+(a.buttonLabels?">StumbleUpon":
' title="StumbleUpon">')+"</a>"),a.reddit&&r.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit"'+(a.buttonLabels?">Reddit":' title="Reddit"')+"</a>"),r.children("a").attr("target","_blank"),a.email&&r.append('<a href="mailto:?subject='+k+"&body="+f+"%0D%0A"+d.replace(/%/g,"%25")+'" class="email"'+(a.buttonLabels?">Email":' title="Email">')+"</a>"),a.buttonLabels||document.touchMode||r.children("a").addTooltip()}m.on("destroy",function(){r.remove()});a.inline?r.appendTo(m):m.addTooltip(r,
{width:a.width,stay:5E3,pos:a.pos})})};b.fn.addSocial.defaults={className:"shares",width:120,useHash:!0,likeBtnTheme:"light",inline:!1,buttonLabels:!0,pos:[1,2,1,0]};b.fn.addSocial.text={shareOn:"Share on",checkOutThis:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}})(jQuery);
(function(b){b.fn.readData=function(a,c){if(null==a||null==c)return this;c=c.split(",");var d,e=c.length,f;return this.each(function(){for(d=0;d<e;d++)null!=(f=b(this).data(c[d]))&&(a[c[d]]=f)})};b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.togglein=function(a){if(typeof a===UNDEF)return this.each(function(){b(this).css("display","none"===b(this).css("display")?"inline-block":"none")});b(this).css("display",a?"inline-block":"none");return this};
b.fn.getDim=function(){var a=b(this).eq(0),c={width:a.width(),height:a.height()};if((0===c.width||0===c.height)&&"none"===a.css("display")){var d=a.css("position"),e=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});c.width=a.width();c.height=a.height();a.css({display:"none",position:d,left:e})}return c};typeof Search!==UNDEF&&(Search.text=getTranslations({searchBoxTip:"Search...",searchResultsFor:"Search results for",newImages:"New images",notFound:"Not found",close:"Close"}),
Search.start=function(a){if(null!=a){var c="string"===typeof a||b.isNumeric(a)?String(a):"FORM"===a.nodeName?b(a).find("input[type=search]").val().trim():b(a).text().trim(),d,e=0,f,k,h,q=!1,m,r,l,p,n,g,u,v,t,x,s,y,w;if(Search.data&&b.isArray(Search.data)&&Search.data.length&&c&&!(2>c.length)){d=b("<div>",{"class":"searchresults"});r=function(a){a.preventDefault();a=b(this).closest("form").children("input:first").val().trim();2<=a.length&&Search.start(a);return!1};c.startsWith("@new")?(q=!0,h=Search.created||
Math.round((new Date).getTime()/864E5),k=parseInt(c.split(":")[1],10)||30):(w=RegExp("("+c.replace(/\s/g,"|")+")","i"),d.append('<form><input type="text" value="'+c+'"><a class="button">&nbsp;</a></form>'),d.find("a.button").on("click",r),d.find("form").on("submit",r));t=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";r=window.location.href.getRelpath(Math.floor(t.length/3));var A=function(a){var d=b(a.target).closest("a");if(!d.length||!d.hasClass("active")||!window.location.href.endsWith(d.attr("href")))return Search.makeSlides||
(d.addClass("active"),d.siblings(".active").removeClass("active")),b.cookie("lastSearch",c,8),!0;a.cancelBubble=!0;return!1};for(l=0;l<Search.data.length;l++)for(v=t,Search.data[l][0].length&&(v+=(Search.urlEncode?Search.data[l][0]:encodeURIComponent(Search.data[l][0]).replace(/%2F/g,"/"))+"/"),g=Search.data[l][1].length,p=0;p<g;p++)if(x=Search.data[l][1][p].split(Search.sep),q&&5<x.length&&(m=h-parseInt(x[5],10))<k||!q&&w.test(Search.data[l][1][p])){u=x[0].split(":");y=u[0].getExt();s=1<u.length?
u[1]:u[0].substring(u[0].lastIndexOf(".")+1);n=encodeURIComponent(u[0]);switch(y.toLowerCase()){case Search.ext:u=v+Search.folderThumb;break;case "tif":case "bmp":Search.makeSlides||(n=n.replaceExt(s));case "jpg":case "jpeg":case "png":case "mp4":u=v+Search.thumbs+"/"+n.replaceExt(s);break;case "mp3":u="png"===s?t+"res/audio.png":v+Search.thumbs+"/"+n.replaceExt(s);break;case "gif":n=n.replaceExt(s);u=v+Search.thumbs+"/"+n;break;case "pdf":case "zip":case "txt":case "doc":case "xls":u=t+"res/"+y+
".png";break;default:u=t+"res/unknown.png"}y===Search.ext?(n=v+n,u=v+Search.folderThumb):n=v+(Search.makeSlides?Search.slides+"/"+n.replaceExt(Search.ext):Search.indexName+"#"+(Search.urlEncode?n.replace(/\'/g,"%27").replace(/%/g,"%25").replace(/\(/g,"%2528").replace(/\)/g,"%2529"):n));u=b("<a>",{href:n.fixUrl()}).append(b("<aside>").append(b("<img>",{src:u}))).on("click",A).appendTo(d);n.endsWith(r)&&u.addClass("active");x[1]&&u.append(b("<h5>").append(q?x[1]:x[1].replace(w,"<em>$1</em>")));x[2]&&
x[2]!==x[1]&&u.append(b("<p>").append(q?x[2].trunc(192):x[2].trunc(192).replace(w,"<em>$1</em>")));for(n=3;n<x.length-1;n++)x[n]&&x[n].trim().length&&u.append(b("<p>").append(q?x[n].trunc(192):x[n].trunc(192).replace(w,"<em>$1</em>")));q&&u.append(b("<p>").append("<em>"+getRelativeDate(m)+"</em>"));window.location.hash===x[0]&&(f=e);e++}a.jquery&&b(a).parents(".hint:first").fadeOut(100,function(){b(this).remove()});e?setTimeout(function(){b(".searchresults > a").eq(f||0).focus()},250):d.append(b("<p>",
{text:Search.text.notFound}));b("body").addModal(d,{uid:"searchres",title:c.startsWith("@new")?Search.text.newImages:Search.text.searchBoxTip,darkenBackground:!1,movable:!0,blocking:!1,closeOnClickOut:!1,defaultButton:"close",resizable:!0,width:240,pos:[2,0],scrollIntoView:!0,savePosition:!0});return!1}}},Search.rootPath="",Search.init=function(a){Search.rootPath=a;(a=b.cookie("lastSearch"))&&a.length&&"null"!==a&&(b.cookie("lastSearch",null),Search.start(a))});b.fn.addRegions=function(a,c,d){if(a&&
a.length&&c){d=b.extend({},b.fn.addRegions.defaults,d);var e=[];(function(){var a,b,d,q,m,r,l=c.split("::");for(a=0;a<l.length;a++)b=l[a].split(";"),4<b.length&&b[0].length&&null!==(d=parseFloat(b[1]))&&null!==(q=parseFloat(b[2]))&&null!==(m=parseFloat(b[3]))&&null!==(r=parseFloat(b[4]))&&e.push([b[0],100*d+"%",100*q+"%",100*m+"%",100*r+"%"])})();return e.length?this.each(function(){var c=b(this),k,h;k=parseInt(c.css("padding-top"),10);"a"===this.nodeName&&c.attr("href",NOLINK);for(var q=b("<div>",
{"class":d.id}).hide(),m=b("<div>",{"class":d.id+"-cont"}).css({left:k,top:k,right:k,bottom:k}),r=function(a){a.preventDefault();Search.start(a.target);return!1},l=function(a){m.children("a").eq(b(a.target).index()).addClass(d.active)},p=function(a){m.children("a").eq(b(a.target).index()).removeClass(d.active)},n=0;n<e.length;n++)if(k=b('<a href="'+NOLINK+'">'+e[n][0]+"</a>").appendTo(q),h=b("<a>").css({left:e[n][1],top:e[n][2],width:e[n][3],height:e[n][4]}).append(b("<span>",{text:e[n][0]})).appendTo(m),
k.on({mouseover:l,mouseout:p}),typeof Search!==UNDEF)h.on("click",r);c.addTooltip(q,{stay:5E3});c.on("destroy",function(){q.remove()});c.hasClass(d.active)&&m.addClass(d.active);c.on("click",function(){b(this).add(m).toggleClass(d.active)});a.append(m)}):this}};b.fn.addRegions.defaults={id:"regions",active:"active",pos:[1,2,1,0]};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector);if(d.length){var e,f,k,h,q,m,r=a.marginLeft+
a.padding;e=a.marginRight+a.padding;var l=a.marginTop+a.padding;q=a.marginBottom+a.padding;m=d.data("ow");k=d.data("oh");m&&k||(d.data("ow",m=d.width()),d.data("oh",k=d.height()));(f=d.data("bw"))||d.data("bw",f=parseInt(d.css("border-top-width"),10)||0);(h=d.data("pw"))||d.data("pw",h=parseInt(d.css("padding-top"),10)||0);e=(c.innerWidth()||b("body").width())-2*(f+h)-r-e;c=(c.innerHeight()||b("body").height())-2*(f+h)-l-q;a.fit&&(m>e||k>c||a.enlarge)?(h=Math.min(e/m,c/k),f=Math.round(m*h),k=Math.round(k*
h)):f=m;h=Math.round((e-f)/2)+r;q=Math.round((c-k)/2)+l;f!==m&&d.translateToPos();if(a.animate){d.stop(!0,!1);if(a.preScale&&1!==a.preScale){m=f*a.preScale;var p=k*a.preScale;d.css({left:Math.round((e-m)/2)+r,top:Math.round((c-p)/2)+l,width:Math.round(m),height:Math.round(p)})}else a.init&&d.css({left:h,top:q});d.animate({left:h,top:q,width:f,height:k},{duration:a.speed,easing:a.effect,complete:a.complete})}else d.css({left:h,top:q,width:f,height:k}),b.isFunction(a.complete)&&a.complete.call(this)}})};
b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.collectMarkers=function(a){a=b.extend({},b.fn.collectMarkers.defaults,a);var c=[],d,e,f;this.each(function(k){d=b(this).find(a.selector);d.length&&(e=d.data(a.mapid))&&(e=b.getLatLng(e))&&(f=d.data(a.captionid)||d.attr("alt"),c.push({map:e,label:k+1+(f?": "+f.stripHTML():""),link:a.dynamic?b(this):b(this).attr("href")}))});
return c};b.fn.collectMarkers.defaults={selector:"img:first",mapid:"map",captionid:"caption"};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);text=getTranslations(b.fn.markFoldersNew.text);if(a.days){var c=a.ref||Math.round((new Date).getTime()/864E5);return this.each(function(){c-parseInt(b(this).data("modified")||0,10)<=a.days&&b(this).after('<span class="'+a.cls+'">'+text.newItem+"</span>")})}};b.fn.markFoldersNew.defaults={days:7,cls:"newlabel"};b.fn.markFoldersNew.text=
{newItem:"NEW"};b.fn.turtleHelp=function(a){a=b.extend({},b.fn.turtleHelp.defaults,a);var c=getTranslations(b.fn.turtleHelp.text),d=b("<div>",{"class":"help"}),e=function(a){if(c.hasOwnProperty(a)){var e=1,f,m=b("<ul>",{"class":a}).appendTo(d);for(f in c[a])m.append(b("<li><span>"+e++ +"</span>"+c[a][f]+"</li>"))}};a.index&&e("index");a.slide&&e("slide");a.pressF1&&d.append(b("<p>",{html:c.help_pressF1}));var f=function(){b("body").addModal(d,{uid:"help",title:c.help_title,width:720,savePosition:!0,
resizable:!0})};if(a.useF1&&!document.touchMode)b(document).on("keydown",function(c){return document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#help").is(":visible")?!0:112===(c?c.keyCode:window.event.keyCode)?(c.preventDefault(),f(),!1):!0});return this.each(function(){b(this).on("click",function(a){a.preventDefault();f();return!1})})};b.fn.turtleHelp.defaults={useF1:!0,index:!0,slide:!1};b.fn.turtleHelp.text={help_title:"Using Turtle gallery",
help_pressF1:"Press <b>F1</b> any time to get help!",index:{help_topNavigation:"Top <b>navigation</b> bar with <b>Home</b> button",help_upOneLevel:"<b>Up</b> one level",help_authorInfo:"Author or company <b>information</b>",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_searchNew:"Search <b>new images</b>",help_search:"<b>Search</b> button",help_downloadZip:"<b>Download</b> album or current folder as ZIP file",help_startSlideshow:"Start <b>slideshow</b> <em>Numpad *</em>"},
slide:{help_previousPicture:"<b>Previous</b> picture <em>Left arrow</em><em>Swipe right</em>",help_backToIndex:"Back to <b>thumbnail page</b> / up one level <em>Esc</em>",help_toggleFit:"Toggle <b>fit to screen</b> or <b>1:1</b> size <em>Numpad +</em>",help_toggleInfo:"Show/hide <b>captions</b> and other panels, like Metadata, Map, Shopping, etc. <em>Numpad -</em>",help_toggleThumbnails:"Show/hide <b>thumbnail</b> scroller <em>Numpad -</em>",help_toggleAutoPlay:"Start/stop <b>slideshow</b> <em>Numpad *</em>",
help_nextPicture:"<b>Next</b> picture <em>Right arrow</em><em>Swipe left</em>",help_toggleMeta:"Toggle <b>photo data</b>",help_toggleMap:"Toggle <b>map</b>",help_toggleShop:"Toggle <b>shopping options</b> panel",help_downloadImage:"Download <b>high resolution</b> file",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_toggleComments:"Toggle <b>Facebook comments</b>",help_toggleFaces:"Toggle visibility of <b>tagged people</b>"}};b.fn.turtle=function(a,c){a=b.extend({},
b.fn.turtle.defaults,a);c=b.fn.turtle.ids;var d=getTranslations(b.fn.turtle.text),e=function(c,d,e){b.cookie(c,d,e);a[c]=d};(function(c){for(var d,e=0;e<c.length;e++)null!==(d=b.cookie(c[e]))&&(a[c[e]]=d)})("thumbsOn infoOn commentsOn metaOn mapOn regionsOn shopOn shareOn printOn fitImage slideshowDelay slideshowOn".split(" "));document.touchMode&&(a.preScale=!1);b.fn.addScroll.defaults.dontDrag="#"+c.map;b.fn.addMap.defaults.zoom=a.mapZoom;b.fn.addMap.defaults.type=a.mapType;b.fn.addMap.defaults.resPath=
a.resPath;b.fn.addShop.defaults.id=a.shopId;b.fn.addShop.defaults.path=(a.albumName?a.albumName+"/":"")+a.relPath;b.fn.addShop.defaults.currency=a.shopCurrency||"EUR";b.fn.addShop.defaults.handling=a.shopHandling||null;b.fn.addShop.defaults.locale=a.shopLocale||"US";b.fn.addShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addShop.defaults.discount=a.shopDiscount||0;b.fn.addShop.defaults.options=a.shopOptions||"";b.fn.addShop.defaults.coupons=a.shopCoupons||"";a.shopContinueUrl&&(b.fn.addShop.defaults.continueUrl=
a.shopContinueUrl.match(/^https?:/i)?a.shopContinueUrl:window.location.origin+a.shopContinueUrl);b.fn.addPlayer.defaults.backgroundColor=b("body").css("background-color").rgb2hex();a.linkSlides||(b.fn.addPlayer.defaults.fullScreen=a.videoMaximize,b.fn.addPlayer.defaults.auto=a.videoAuto,b.fn.addPlayer.defaults.solution=a.prioritizeFlash?"flash,html":"html,flash");b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=
!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;(function(a){for(var c in a)a.hasOwnProperty(c)&&(b.fn.addSocial.defaults[c]=a[c])})(a.shares);a.shareSlides=a.shares&&(a.linkSlides&&a.shares.facebookLike||a.shares.facebook||a.shares.twitter||a.shares.gplus||a.shares.pinterest||a.shares.digg||a.shares.delicious||a.shares.myspace||a.shares.stumbleupon||a.shares.reddit||a.shares.email);var f=Math.round((new Date).getTime()/864E5),k="ms"===VEND&&Modernizr&&!1===Modernizr.opacity,h,q,m,r,
l,p,n,g={},u,v,t=null,x=null,s=0,y=null,w=null,A="index"===b("body").attr("id"),B="page"===b("body").attr("id"),z=A&&!a.linkSlides,D=[],C=!1,E=!1,G=null,J=null,M=b(window).width(),S=b(window).height(),K=function(){clearTimeout(J);J=setTimeout(function(){if(!b(".jp-video-full").length){var c=b(window).width(),d=b(window).height();if(c!==M||d!==S)t&&t.centerThis({fit:a.fitImage,marginTop:P(),marginBottom:Q()}),M=c,S=d}},100)},N=-1,O=-1,Da=function(U){if(U){var f=b("<div>",{"class":c.startShow}).appendTo(U);
U=b("<div>",{"class":c.startTxt,width:"auto",text:d.startSlideshow}).appendTo("body");var g=f.width(),k=U.outerWidth();f.append(U);if(g<k)U.on({mouseenter:function(){f.stop(!0,!1).animate({width:k},500)},mouseleave:function(){f.stop(!0,!1).animate({width:g},500)}});f.on({click:function(d){if(z)return d.preventDefault(),a.slideshowFullScreen&&b("html").fullScreen(!0),s===h.length-1?F(0):F(),h.length&&setTimeout(T,1E3),!1;e("slideshowOn",!0,8);window.location.href=h.filter("."+c.active).attr("href")}})}},
Ea=function(b){b&&b.length&&(A&&h.length&&a.showStart&&Da(b),a.uplink=b.find("."+c.parent+">a").attr("href")||"")},Fa=function(){if(!(a.licensee||typeof _jaShowAds!==UNDEF&&!_jaShowAds||LOCAL||b.cookie("ls"))){var c=a.resPath+"/logo.png";b(new Image).load(function(){var a=b("<div>").css({background:"url("+c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h4>Turtle skin <small>"+VER+"</small></h4><p>Unlicensed</p>");b("body").addModal(a,{width:240,defaultButton:!1,
autoFade:600});b.cookie("ls",!0)}).attr("src",c)}},Ga=function(c){if(m&&m.is(":visible")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 13:case 10:z?F():window.location.href=h.eq(s).attr("href");break;case 37:s=(s?s:h.length)-1;L();break;case 38:s&&a.cols&&(s=Math.max(0,s-a.cols));L();break;case 39:s=(s+1)%h.length;L();break;
case 40:s<h.length-1&&a.cols&&(s=Math.min(h.length-1,s+a.cols));L();break;case 97:case 35:s=h.length-1;L();break;case 103:case 36:s=0;L();break;case 106:case 179:z&&a.slideshowFullScreen&&(E=!1,b("html").fullScreen(!0));z&&F();T();break;default:return!0}return!1},ka=function(d){if(m.is(":hidden")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(d?d.keyCode:window.event.keyCode){case 27:V();
break;case 37:d=b("."+c.main);var e=b("."+c.img);d.length&&(d.position().left>=a.fitPadding?Y():(e=Math.round(0.8*e.width()),d.animate({left:Math.min(d.position().left+e,a.fitPadding)},a.scrollDuration)));break;case 38:d=b("."+c.main);e=b("."+c.img);!d.length||d.position().top>a.fitPadding||(e=Math.round(0.8*e.width()),d.animate({top:Math.min(d.position().top+e,a.fitPadding)},a.scrollDuration));break;case 39:d=b("."+c.main);e=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=e.width()-
a.fitPadding)R();else{var f=Math.round(0.8*e.width());d.animate({left:Math.max(d.position().left-f,e.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);e=b("."+c.img);!d.length||d.position().top+d.outerHeight()<=e.height()-a.fitPadding||(f=Math.round(0.8*e.width()),d.animate({top:Math.max(d.position().top-f,e.height()-a.fitPadding-d.outerHeight())},a.scrollDuration));break;case 97:case 35:z?F(h.length-1):window.location.href=a.firstPage;break;case 103:case 36:z?
F(0):window.location.href=a.firstPage;break;case 106:case 179:y?I():(z&&a.slideshowFullScreen&&(E=!1,b("html").fullScreen(!0)),T());break;case 107:ba();break;case 109:d=a.fitFreespace;a.fitFreespace=!1;a.infoOn||a.thumbsOn?(ga(),ha(),t&&d&&t.centerThis({fit:a.fitImage,marginTop:0,marginBottom:0})):(ia(),ja(),t&&d&&t.centerThis({fit:a.fitImage,marginTop:u.outerHeight()||0,marginBottom:n.outerHeight()||0}));a.fitFreespace=d;break;default:return!0}return!1},Z=function(){(0<a.level?window:parent).location.href=
a.uplink||a.indexPage||"../"},V=function(){z||(a.curr&&b.cookie("curr:"+a.albumName+"/"+a.relPath,a.curr,a.keepPrefs),window.location.href=a.indexPage);if(!a.skipIndex||a.level||a.uplink){var d=b("[role=main]"),e;b.fn.hideAllTooltips();m.is(":visible")?(I(),z&&a.slideshowFullScreen&&b("html").fullScreen(!1),a.skipIndex?Z():(d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),q.children("."+c.cont).trigger("adjust"),setTimeout(function(){q.loadImages()},100)),
a.transitions?m.fadeOut(a.speed):m.hide(),t&&(e=t.find("."+c.video+",."+c.audio)).length&&e.trigger("pause"),b("#"+c.map+">."+c.cont).trigger("adjust"),"no"!==a.hash&&b.history.load(""))):d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),setTimeout(function(){q.loadImages()},100));d.find("[role=scroll]").data("dragOn",!1)}},Ha=function(a){var b;null==a?b=s:"number"===typeof a?b=Math.minMax(0,a,h.length):0>(b=h.index(a))&&v&&(b=v.index(a));return b},Ia=
function(a){var b,d;for(b=0;b<h.length;b++)if(d=h.eq(b).children("img:first"),(d=d.length&&(d.data(c.link)||d.data(c.src)).getFile())&&d===a)return b;return-1},la=function(){var a=h.eq(s).children("img:first");return a.length?(a.data(c.link)||a.data(c.src)).getFile():null},ca=function(a){h.children("."+c.checkbox).toggleClass(c.active,a);m&&m.find("."+c.checkbox).toggleClass(c.active,a)},Ja=function(){h.children("."+c.checkbox).on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);
b(this).toggleClass(c.active,!a);b(this).parent().hasClass(c.active)&&m.find("."+c.checkbox).toggleClass(c.active,!a);return!1}).on(document.touchMode?"dbltap":"dblclick",function(a){a.preventDefault();ca(!b(this).hasClass(c.active));return!1})},L=function(d){var e=h.eq(s);h.filter("."+c.active).removeClass(c.active);e.addClass(c.active);a.skipIndex||typeof d!==UNDEF&&!1!==d||e.trigger("setactive");v&&(v.filter("."+c.active).removeClass(c.active),v.eq(s).addClass(c.active).trigger("setactive"));a.mapOnIndex&&
b("#"+c.map+" ."+c.cont).trigger("setactive",e.find("img:first").data(c.mapid));s&&b.cookie("curr:"+a.albumName+"/"+a.relPath,s,a.keepPrefs)},ma=function(){b.cookie("curr:"+a.albumName+"/"+a.relPath,null)},Y=function(){I();if(z)s?F(s-1):"startover"===a.afterLast?F(h.length-1):t.find("."+c.main).trigger("dragcancel");else{var d=b("."+c.controls+" ."+c.prev);d.length&&(d=d.attr("href"))!==NOLINK?window.location.href=d:t.find("."+c.main).trigger("dragcancel")}},R=function(f){var g=[];if(z)if(s<h.length-
1)f?da():I(),F(s+1);else if("startover"===a.afterLast||y&&a.slideshowLoop)f?da():I(),F(0);else{ma();t.find("."+c.main).trigger("dragcancel");switch(a.afterLast){case "onelevelup":a.uplink&&Z();break;case "backtoindex":a.skipIndex||V();break;case "nextfolder":a.nextFoldersFirst&&(window.location.href=a.nextFoldersFirst);break;case "ask":I(),1<h.length&&g.push({t:d.startOver,h:function(){F(0)}}),a.uplink&&g.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,h:function(){Z()}}),a.skipIndex||
g.push({t:d.backToIndex,h:function(){V()}}),a.nextFoldersFirst&&g.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),g,{type:"question",uid:"dialog",title:d.atLastPage,width:500})}t.find("."+c.main).trigger("dragcancel")}else{var k=b("."+c.controls+" ."+c.next);k.length&&(k=k.attr("href"))&&k.length&&k!==NOLINK?(e("slideshowDelay",a.slideshowDelay),y&&e("slideshowOn",f,8),window.location.href=k):"ask"===a.afterLast&&
(I(),t.find("."+c.main).trigger("dragcancel"),ma(),a.firstPage&&g.push({t:d.startOver,h:function(){y&&e("slideshowOn",null!=y,8);window.location.href=a.firstPage}}),a.uplink&&g.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,h:function(){Z()}}),a.indexPage&&g.push({t:d.backToIndex,h:function(){window.location.href=a.indexPage}}),a.nextFoldersFirst&&g.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),
g,{uid:"dialog",type:"question",title:d.atLastPage,width:500}))}},na=function(){w&&(w=clearTimeout(y),y=setTimeout(function(){R(!0)},300))},da=function(){y&&(clearTimeout(y),y=setTimeout(function(){R(!0)},a.slideshowDelay))},T=function(){y=clearTimeout(y);var d;g.play.hide();g.pause.showin();(d=t.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)?(w=!0,d.trigger("setEndedFn",na)):y=setTimeout(function(){R(!0)},a.slideshowDelay);a.bgAudioId&&b(a.bgAudioId).trigger("play");H()},
I=function(){w=!1;if(y){var d;g.pause.hide();g.play.showin();y=clearTimeout(y);H();z?a.bgAudioId&&b(a.bgAudioId).trigger("pause"):e("slideshowOn",!1);(d=t.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)&&d.trigger("setEndedFn",null)}},X=!1,ea=function(){E||X||(X=!0,p.stop(!0,!1).fadeTo(200,0.8,function(){k&&p.css("filter",null)}),G=setTimeout(function(){H()},1500))},H=function(){E?G=setTimeout(function(){H()},750):(X=!1,G=clearTimeout(G),p.fadeTo(500,a.controlOutOpacity))},
Ka=function(d){if(d.target&&("A"===d.target.nodeName||b(d.target).parents("."+c.bottom).length))return!0;X?(X=!1,G=clearTimeout(G),p.fadeTo(500,a.controlOutOpacity)):ea();return!0},ha=function(){a.infoOn&&(g.hideInfo.hide(),g.showInfo.showin(),a.transitions?n.animate({bottom:-n.outerHeight()},500,function(){n.hide()}):n.css({bottom:-n.outerHeight()}).hide(),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:P(),marginBottom:0}),H(),e("infoOn",!1))},ja=function(){if(!a.infoOn){g.showInfo.hide();
g.hideInfo.showin();n.is(":hidden")&&n.show().css({bottom:-n.outerHeight()});var b=function(){n.children("."+c.map).trigger("adjust")};a.transitions?n.animate({bottom:0},500,b):(n.show().css({bottom:0}),b());t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:P(),marginBottom:n.outerHeight()});H();e("infoOn",!0)}},ga=function(){a.thumbsOn&&(g.hideThumbs.hide(),g.showThumbs.showin(),a.transitions?l.animate({top:-u.outerHeight()-10},500):l.css({top:-u.outerHeight()-10}),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,
marginTop:0,marginBottom:Q()}),H(),e("thumbsOn",!1))},ia=function(){a.thumbsOn||(g.showThumbs.hide(),g.hideThumbs.showin(),a.transitions?l.animate({top:0},500):l.css({top:0}),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:u.outerHeight(),marginBottom:Q()}),H(),e("thumbsOn",!0))},P=function(){return a.fitFreespace&&0<=l.position().top?u.outerHeight()||0:0},Q=function(){return a.fitFreespace&&n.is(":visible")?n.outerHeight()||0:0},ba=function(){a.fitImage?oa():pa()},oa=function(){a.hideFitBtn||
(g.noresize.hide(),g.resize.showin());b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;t.centerThis({fit:!1,marginTop:P(),marginBottom:Q()});H();e("fitImage",!1)},pa=function(){a.hideFitBtn||(g.resize.hide(),g.noresize.showin());b.fn.centerThis.defaults.enlarge=!0;t.centerThis({fit:!0,marginTop:P(),marginBottom:Q()});H();e("fitImage",!0)},La=function(a){a.preventDefault();if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;F(b(this));return!1},aa=function(a){a&&a.length&&(a.stop(),a.trigger("destroy"),
a.find("."+c.video+",."+c.audio).trigger("destroy"),a.find("."+c.share+"-"+c.icon).trigger("destroy"),a.find("."+c.map).trigger("destroy"),a.remove())},Ma=function(c){var d;c&&c.length&&0<=(d="number"===a.hash?(parseInt(c,10)||1)-1:Ia(c))&&d<h.length?(F(d,!1),a.slideshowAuto=!1):(V(),"ms"==VEND&&setTimeout(function(){b("[role=main]").show();b("[role=scroll]").trigger("adjust")},10))},qa=function(c){"number"===a.hash?b.history.load(c+1):(c=la())&&b.history.load(c)},F=function(e,f){typeof f===UNDEF&&
(f=!0);"number"!==typeof e&&(e=e?Ha(e):s);m.is(":hidden")&&(t&&t.data("curr")!==e&&aa(t),a.transitions?m.fadeIn(a.speed):m.show(),b.fn.hideAllTooltips(),u.children(":first").loadImages());if(t&&t.data("curr")===e)!1!==f&&qa(e);else{var g=h.eq(e),k=g.attr("href"),l=g.children("img").eq(0),n,p,q;if(l.length){t&&(aa(x),x=t,x.css({zIndex:0}),setTimeout(function(a){a.trigger("unswipe")},50,x.find("."+c.main)),document.touchMode||x.unmousewheel());(n=m.children("."+c.img).not(t)).length&&n.stop().remove();
t=b("<div>",{id:"img"+e,"class":c.img}).css({zIndex:1,display:"none"}).data({curr:e}).appendTo(m);if(a.clickBesideForIndex&&(!a.skipIndex||a.level||a.uplink))t.on("click",function(a){if(b(a.target).hasClass("img"))return a.preventDefault(),V(),!1});r.css({opacity:0,display:"block"}).animate({opacity:1});s=e;L();z&&f&&qa(s);var v=b("<div>",{"class":c.main});if(l.data(c.isother)||!k)p=Math.max(l.data(c.width)||m.width()-160,280),q=Math.max(l.data(c.height)||m.height()-120,200),v.addClass(c.other),(k=
l.data(c.content))&&(k=k.trim()).length?v.css({width:p,height:q}).append(k.match(/^https?:\/\//i)?b("<iframe>",{width:"100%",height:"100%",src:k,frameborder:0,allowfullscreen:"allowfullscreen"}):k):(v.append(b("<a>",{href:l.data(c.link),target:"_blank"})),v.append(b("<p>",{text:d.clickToOpen})),v.children("a:first").append(l.clone())),W(v);else if(l.data(c.isvideo)||l.data(c.isaudio)){p=l.data(c.width)||m.width()-160;q=l.data(c.height)||m.height()-120;(w=y)&&(y=clearTimeout(y));if(l.data(c.isvideo)){var k=
m.width()-40,A=m.height()-40;if(p>k||q>A)k=Math.min(k/p,A/q),p=Math.round(p*k),q=Math.round(q*k);v.addClass(c.video)}else p=Math.max(240,l.data(c.width)||0),q=Math.max(180,l.data(c.height)||0),v.addClass(c.audio);v.css({width:p,height:q}).data({ow:p,oh:q});setTimeout(function(){n=v.addPlayer({src:l.data(c.link),title:a.showVideoTitle?l.attr("alt"):"",poster:l.data(c.poster),ended:na,resPath:a.resPath})},a.speed/3);W(v)}else p=l.data(c.width),q=l.data(c.height),A=b(new Image),v.addClass(c.image).append(A).css({width:p,
height:q}).data({ow:p,oh:q}),A.attr({src:k,width:p||"auto",height:q||"auto"}),A[0].complete?(l.data("cached",!0),W(v)):A.on("load",function(){l.data("cached",!0);W(v)}).prop({src:k});(n=g.find(".checkbox")).length&&(v.append(n=n.clone()),n.on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);b(this).toggleClass(c.active,!a);h.filter("."+c.active).find("."+c.checkbox).toggleClass(c.active,!a);return!1}));ra(l,e)}}},Na=function(a){var b=t.find("nav a."+c.regions+"-icon").eq(0);b.length&&
(a=h.eq(a).find("img:first"),b.addRegions(t.find("."+c.main).eq(0),a.data(c.regions)))},sa=function(a){a&&a.length&&(a.data(c.kill,!0),setTimeout(function(){a&&a.removeData(c.kill)},500))},Oa=function(a){a=b(a.target).parents("."+c.main);a.data(c.kill)||a[0].dragOn||(sa(a),R());return!1},Pa=function(a,d){a.preventDefault();var e=b(a.target).parents("."+c.img);e.data(c.kill)||(sa(e),0<d?Y():R());return!1},Qa=function(b){if(a.rightClickProtect)b.on("contextmenu",noAction);setTimeout(function(){if(!document.touchMode&&
a.enableMouseWheel)t.on("mousewheel",Pa);if(document.touchMode)y||ea(),t[0].addEventListener(TOUCH_START,Ka),b.on({click:noAction,dbltap:ba});else if(1<h.length||!z)if(b.hasClass(c.image)&&a.clickForNext)b.on("click",Oa);else b.on({click:noAction,dblclick:ba});b.hasClass(c.image)&&b.addSwipe(R,Y)},a.speed/2)},ta=function(a){var d=a.attr("href"),e=a.children("img").eq(0);!d||!e||e.data("cached")||e.data(c.isvideo)||e.data(c.isother)||b("<img>").on("load",function(){e.data("cached",!0)}).attr({src:d})},
W=function(d){r&&r.length&&(a.transitions?r.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}}):r.hide());if(z)a.transitions?x&&x.stop(!0,!1).animate({opacity:0},a.speed/2,"linear",function(){aa(x)}):aa(x),t.children().not("."+c.bottom).remove(),t.append(d);else if(d=t.find("."+c.main),!d.length)return;var e=d.hasClass(c.image);Qa(d);setTimeout(function(){a.transitions?t.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:k?function(){t.css({filter:""})}:
null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:P(),marginBottom:Q(),preScale:e&&a.preScale,animate:e&&a.preScale&&1!==a.preScale,fit:a.fitImage}):t.show().centerThis({init:!0,marginTop:P(),marginBottom:Q(),fit:a.fitImage});Na(s)},50);z?(s<h.length-1&&ta(h.eq(s+1)),0<s&&ta(h.eq(s-1))):a.slideshowOn&&T()},ra=function(f,g){var k,l,m,p,q=Math.round(0.8*t.width())-30,r=!(f.data(c.isvideo)||f.data(c.isaudio)||f.data(c.isother));z?(n=b("<div>",{"class":c.bottom}).appendTo(t),k=b("<div>",
{"class":c.cont}).appendTo(n),typeof g!==UNDEF&&a.showImageNumbers&&k.append('<h4 class="nr"><strong>'+(g+1)+"</strong> / "+h.length+"</h4>"),(m=f.data(c.caption))&&k.append(m)):k=n.children("."+c.cont);l=b("<nav>",{"class":"buttons"}).prependTo(k);k.width()>q&&k.width(q);var u=function(d){d.preventDefault();var f=b(d.target);d=f.data("rel");var h=k.children("."+d),g=h.is(":visible"),l=Q(),m=h.outerHeight(!0);f.toggleClass(c.active,!g);d===c.map?(f=function(){g||h.children("."+c.mapcont).trigger("adjust")},
a.transitions?h.slideToggle("fast",f):(h.toggle(),setTimeout(f,50))):a.transitions?h.slideToggle("fast"):h.toggle();t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:P(),marginBottom:l+(g?-m:m)});e(d+"On",!g);return!1},q=function(a,d){var e=b("<div>",{"class":c.panel+" "+a}).data("rel",a);if(d)var f=k.find("."+c.panel).eq(0),e=f.length?e.insertBefore(f):e.appendTo(k);else e=e.appendTo(k);e.append(b("<div>",{"class":c.icon}));return e},x=function(e){var f=b("<a>",{"class":e+"-"+c.icon}).data("rel",
e).appendTo(l);a.buttonLabels&&f.text(d[e+"Btn"]||e);document.touchMode||f.addTooltip(d[e+"Label"]||(a.buttonLabels?"":d[e+"Btn"]||e));f.on("click",u);return f};if(a.shareSlides){var w;a.shareInline?(w=q(c.share,!0),x(c.share),w=b("<div>",{"class":c.shares}).css("min-height","25px").appendTo(w)):(w=b("<a>",{"class":c.share+"-"+c.icon}).appendTo(l),a.buttonLabels&&w.text(d.shareBtn));z?(p="number"===a.hash?s+1:la(),setTimeout(function(){w.addSocial({hash:p,inline:a.shareInline,buttonLabels:a.shareLabels,
title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})},a.speed/2)):w.addSocial({useHash:!1,inline:a.shareInline,buttonLabels:a.shareLabels,title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})}var y;!z&&(y=k.children("."+c.comments)).length&&(y.data("rel",c.comments),x(c.comments));for(var A=[c.meta,c.map,c.shop,c.print],B=0;B<A.length;B++)y=A[B],null==f.data(y)||y==c.map&&!a.mapOnSlide||(q(y),x(y));if(r){if(a.fotomotoOn){var C=b("<a>",{"class":c.fotomoto+"-"+c.icon,text:a.buttonLabels?
d.fotomotoBtn:""}).appendTo(l);C.addTooltip(LOCAL?d.locationWarning:"<h5>Fotomoto</h5>"+d.fotomotoLabel);setTimeout(function(){C.on("click",function(b){b.preventDefault();typeof FOTOMOTO===UNDEF||LOCAL||FOTOMOTO.API.showWindow(10,f.data(c.link)||(z?f.data(c.src):f.attr("src")).replace(a.thumbs+"/",a.slides+"/"));return!1})},a.speed)}if(m=f.data(c.mostphotos))m.startsWith("http")||(m="http://www.mostphotos.com/"+m),b("<a>",{href:m,"class":c.mostphotos+"-"+c.icon,text:a.buttonLabels?d.mostphotosBtn:
"",target:"_blank"}).appendTo(l).addTooltip("<h5>"+d.mostphotosBtn+"</h5>"+d.mostphotosLabel);f.data(c.regions)&&(q=b("<a>",{"class":c.regions+"-"+c.icon}).appendTo(l),a.buttonLabels&&q.text(d.people),a[c.regions+"On"]&&q.addClass(c.active),q.on("click",function(){e(c.regions+"On",!b(this).hasClass(c.active))}))}(m=f.data(c.link))&&(!r&&a.downloadNonImages||r&&!a.rightClickProtect)&&(r=b("<a>",{href:m,"class":c.link+"-"+c.icon,download:"",target:"_blank"}).appendTo(l),a.buttonLabels&&r.text(f.data(c.isoriginal)?
d.original:d.hiRes),r.addTooltip((a.buttonLabels?"":"<strong>"+(f.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br>")+("download"in r[0]?"":"<small>"+d.saveTip+"<br>")+'<input class="fullw" type="text" value="'+m.fullUrl()+'" readonly></small>',{stay:5E3}));a.imgHook&&(r=b("<a>",{"class":c.custom+"-"+c.icon}).appendTo(l),a.buttonLabels&&a.imgHookBtn&&r.text(a.imgHookBtn),r.on("click",function(d){d.preventDefault();d=f.data(c.link)||(z?f.data(c.src):f.attr("src")).replace(a.thumbs+"/","");b("body").addModal(b(a.imgHook.replace(/\%fileName\%/g,
d)),{uid:c.custom,width:a.imgHookWidth||600,title:a.imgHookBtn,defaultButton:"okButton",resizable:!0,savePosition:!0});return!1}));a.imgHookFn&&b.isFunction(a.imgHookFn)&&a.imgHookFn.call(f);k.children("."+c.panel).each(function(){var d=b(this),e=d.data("rel");if(e&&null!==(m=f.data(e))){if(e===c.map){var h=b("<div>",{"class":c.mapcont}).appendTo(d);h.width(k.width()-30);if(a.mapAll)h.addMap({click:function(){z?F(this.link):window.location.href=this.link},markers:D,curr:parseInt(z?f.data(c.mapid):
v.filter("."+c.active).find("img:first").data(c.mapid),10)});else{var g=(f.data(c.caption)||"").stripHTML()||f.attr("alt")||s+1+"";h.addMap({map:m,label:g})}setTimeout(function(){h.trigger("adjust")},a.speed)}else e===c.shop?(g={},"+"!==m&&(g.options=m),null!==(m=f.data(c.discount))&&(g.discount=m),d.addShop(f.closest("a"),g)):d.append(m);a[e+"On"]?l.children("a."+e+"-icon").addClass(c.active):d.hide()}});l.html().length||l.remove();a.infoOn||n.hide()},Ra=function(){var e=b("<div>",{"class":c.feedback}),
f=window.location.href.getDir(),g=b("<form>",{id:c.feedback}).appendTo(e);a.directKey&&(g.append('<input type="hidden" name="from" value="'+a.feedbackEmail.replace("|","@")+'">'),g.append('<input type="hidden" name="to" value="'+xDecrypt(a.directKey)+'">'),g.append(b('<p class="email"><label for="email">'+d.yourEmail+'</label><input id="email" name="email" type="email"></p>')));g.append(b('<p class="subject"><label for="subject">'+d.subject+'</label><input id="subject" name="subject" value="'+a.albumName+
(a.relPath.length?"/"+a.relPath:"")+'"></p>'));g.append(b('<p class="message"><label for="message">'+d.message+'</label><textarea id="message" name="message"></textarea></p>'));h.filter(function(){return b(this).children("."+c.active).length}).each(function(a){var e=b(this).find("img").eq(0),h=e.data("src"),e=(e.data(c.isimage)||e.data(c.isother)?h:e.data("link")||"").getFile();g.append(b('<div><aside><img src="'+h+'"></aside><div><a class="remove">&times;</a><label for="img'+a+'">'+e+'</label><input type="hidden" name="file['+
(a+1)+']" value="'+f+"#"+encodeURIComponent(e)+'"><textarea id="img'+a+'" name="comment['+(a+1)+']" placeholder="'+d.comment+'"></textarea></div></div>'))});g.find("a.remove").on("click",function(a){a.preventDefault();b(this).parents("div").eq(1).remove();return!1});var k=function(c){if(!c||!c.length)return console&&console.log("Submitform Error: Missing form"),!1;var e,f=!1;c=c.find("form").eq(0);var h=window.location.href.split("#")[0];if(a.directKey){e=c.find("input#email").val();if(!e.length||
!e.match(/^\S+@\S+[\.][0-9a-z]+$/))return b("body").addModal(b("<div>",{html:d.emailMissing}),{type:"error"}),!1;b.ajax({url:"http://jalbum.net/integration/api/sendmail.json",dataType:"jsonp",data:c.serialize(),success:function(a){"Ok"===a.Result?b("body").addModal(b("<div>",{html:d.messageSent}),{autoFade:1500}):(f=!0,DEBUG&&console&&console.log("Error sending mail: Result="+a.Result+" Cause="+a.Cause),b("body").addModal(b("<div>",{html:"<h3>"+d.errorSending+'</h3><p class="err">'+a.Result+", "+
a.Cause+"</p>"}),{type:"error"}))}});if(f)return!1}else if(a.php)b.ajax({url:resPath+"feddback.php",type:"POST",data:{message:c.serialize(),subject:"Subject of your e-mail"},success:function(a){alert("You data has been successfully e-mailed");alert("Your server-side script said: "+a)}});else{var g="mailto:"+encodeURIComponent(a.feedbackEmail.replace("|","@")),g=g+("?subject="+encodeURIComponent(c.find("input#subject").val())),g=g+"&body=";if(e=c.find("textarea#message").val())g+=encodeURIComponent(e+
"\n\n");c.children("div").each(function(a){g+=encodeURIComponent(a+1+". "+h+"#"+encodeURIComponent(b(this).find("label").eq(0).text())+"\n");if(e=b(this).find("textarea").val())g+=encodeURIComponent(e+"\n");g+=encodeURIComponent("\n")});if(2048<g.length)return b("body").addModal(b("<div>",{html:"<p>"+d.tooLong+"</p>"}),{type:"error"}),!1;window.location.href=g}return!0};g.on("submit",function(){return k(b("#feedback"))});b("body").addModal(e,[{t:d.send,h:k}],{uid:"feedback",enableKeyboard:!1,title:d.sendFeedback,
width:480,resizable:!0,savePosition:!0});return!1},Sa=function(){var a=!1,e=h.filter(function(){var d=b(this),e;return d.children("."+c.checkbox).hasClass(c.active)?(d=d.children("img:first"),e=d.data(c.shop),a=!0,!(e&&"+"!==e||d.data(c.discount))):!1});if(0===e.length)b("body").addModal(b("<h3>"+d.noItemsSelected+"</h3><p>"+(a?d.nonShoppableItems:d.selectItemsHint)+"</p>"),{type:"warning"});else{var f=b("<div>",{"class":c.shopAll});window.location.href.getDir();var g=b("<ul>",{"class":c.thumbs}).appendTo(f);
e.each(function(){g.append(b("<li>").append(b("<img>",{src:b(this).children("img:first").data("src")})))});b("<div>",{"class":c.shop}).appendTo(f).addShop(e);b("body").addModal(f,{uid:c.shopAll+"w",title:d.buyNItems.replace("{0}",e.length),width:640,resizable:!0,savePosition:!0,enableKeyboard:!1,blocking:!0,defaultButton:"close"})}},ua=function(){var c=0;p.children().each(function(){"none"!==b(this).css("display")&&(c+=b(this).outerWidth())});p.css({marginLeft:-Math.floor(c/2)}).width(c);document.touchMode||
p.children("a").not(g.play).addTooltip({delay:500});var d=b("<div>",{"class":"slideshowdelay",text:g.play.prop("title")}),f=b("<form>").appendTo(d);f.on("submit",function(a){a.preventDefault();T();return!1}).append(b("<input>",{type:"text",value:a.slideshowDelay/1E3}).focus().on("change",function(){e("slideshowDelay",Math.round(parseFloat(1E3*b(this).val())||b.fn.turtle.defaults.slideshowDelay));return!0})).append(b("<a>",{"class":"button",href:NOLINK,text:" "}).on("click",fa));f.find("input");g.play.prop("title",
"").addTooltip(d,{stay:5E3});document.touchMode||(z?p.hide():G=setTimeout(function(){H()},1500));p.on({mouseenter:function(){E=!0;b(this).stop(!0,!1).fadeTo(200,1)},mouseleave:function(){E=!1;b(this).stop(!0,!1).fadeTo(200,0.8)}});if(!document.touchMode)m.on("mousemove",function(a){!C&&(N-a.clientY||O-a.clientX)&&(0<=O&&ea(),O=a.clientX,N=a.clientY)})},Ta=function(a){a.preventDefault();I();Y();return!1},Ua=function(a){a.preventDefault();I();V();return!1},Va=function(){a.curr&&b.cookie("curr:"+a.albumName+
"/"+a.relPath,a.curr,600);return!0},va=function(a){a.preventDefault();oa();return!1},wa=function(a){a.preventDefault();pa();return!1},xa=function(a){a.preventDefault();ha();return!1},ya=function(a){a.preventDefault();ja();return!1},za=function(a){a.preventDefault();ga();return!1},Aa=function(a){a.preventDefault();ia();return!1},fa=function(c){c.preventDefault();z&&a.slideshowFullScreen&&(E=!1,b("html").fullScreen(!0));T();return!1},Ba=function(a){a.preventDefault();I();return!1},Ca=function(a){a.preventDefault();
da();R();return!1},Wa=function(){var e,g,k=function(){var c=h.index(b(this));c&&b.cookie("curr:"+a.albumName+"/"+a.relPath,c,a.keepPrefs)};h.each(function(){e=b(this);g=e.find("img").eq(0);if(g.length){if(a.rightClickProtect)e.on("contextmenu",noAction);g.attr("src").endsWith("/"+a.loadImg)&&g.addClass(c.toload);a.markNewDays&&f-parseInt(g.data(c.modified)||0,10)<=a.markNewDays&&e.append(b("<span>",{"class":c.newItem,text:d.newItem}));document.touchMode||e.addTooltip({delay:500});if(!z)h.on("click",
k)}});setTimeout(function(){q.loadImages();setTimeout(function(){q.loadImages()},1200)},100);var l=function(){q.loadImages();return!0};document.touchMode&&(q[0].addEventListener("scroll",l),q[0].addEventListener(TOUCH_END,l));Ja();b("#"+c.selectAll).on("click",function(a){a.preventDefault();ca(!0);return!1});b("#"+c.selectNone).on("click",function(a){a.preventDefault();ca(!1);return!1});b("#"+c.shopAll).on("click",Sa)},Xa=function(){q.find("."+c.folders).on("click",function(){b.cookie("curr:"+a.albumName+
"/"+a.relPath,null);return!0})},Ya=function(){var d,e,f,g,k,m=0,n,q,p,r,s;u=b("<div>",{"class":c.scrollbox}).appendTo(l);k=b("<div>",{"class":"wrap"}).appendTo(u);k=b("<ul>",{"class":c.cont+" "+c.load}).appendTo(k);h.each(function(){d=b(this);g=d.find("img").eq(0);if(g.length){e=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(k));n||(isNaN(n=parseInt(e.css("width"),10))&&(n=133),isNaN(q=parseInt(e.css("height"),10))&&(q=100));p=g.attr("width");r=g.attr("height");if(p>n||r>q)p/n>r/q?(r=Math.round(r*
n/p),p=n):(p=Math.round(p*q/r),r=q);f=b("<img>",{src:g.attr("src"),"class":g.attr("class")}).data({src:g.data("src")}).appendTo(e);p&&r&&f.attr({width:p,height:r});s=d.children("."+c.newItem);s.length&&e.append(s.clone());document.touchMode||e.addTooltip(d.data("hint")||d.siblings("."+c.caption).html(),{delay:500})}});e=k.children("li").first();e.length&&(m=isNaN(m=parseInt(e.css("width"),10))?135:m+((parseInt(e.css("marginLeft"),10)||0)+(parseInt(e.css("marginRight"),10)||0)),k.width(m*k.children().length+
2));k.scrollThumbs({enableMouseWheel:a.enableMouseWheel});v=u.find("li > a");v.on("click",function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;b(this).hasClass(c.active)||(I(),F(v.index(b(this))));L();return!1})},Za=function(){var d=u.find("."+c.cont),e=0;document.touchMode||v.addTooltip({delay:500}).each(function(){e+=b(this).outerWidth()});e+=2*v.length;d.width(e);d.scrollThumbs({enableMouseWheel:a.enableMouseWheel});v.on("click",function(){return!b(this).parents("[role=scroll]").data("dragOn")});
d.trigger("setactive");a.thumbsOn||l.css("top",-u.outerHeight()-10)},$a=function(){Ea(b(a.header));q=b("."+c.items);h.length&&Wa();Xa();b("#"+c.feedback).on("click",Ra);if(h.length){if(a.mapOnIndex||a.mapAll&&a.mapOnSlide)D=h.collectMarkers({dynamic:z});a.mapOnIndex&&D.length&&b("#"+c.map+" ."+c.cont).addMap({click:function(){z?F(this.link):window.location.href=this.link},markers:D,range:999,curr:0});null===(s=b.cookie("curr:"+a.albumName+"/"+a.relPath))||s>=h.length?(s=0,L(!0)):setTimeout(function(){L()},
300);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",Ga)}},ab=function(){h.on("click",La);m=b("<div>",{"class":c.gallery}).attr("role","gallery").appendTo("body");r=b("<div>",{"class":c.wait}).appendTo(m);l=b("<div>",{"class":c.navigation}).appendTo(m);Ya();p=b("<nav>",{"class":c.controls+" clearfix"}).appendTo(l);g.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(p);if(!a.skipIndex||a.level||a.uplink)g.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:
d.backToIndex}).appendTo(p);g.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(p);g.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(p);a.hideFitBtn?g.resize.add(g.noresize).hide():(g.resize.togglein(!a.fitImage),g.noresize.togglein(a.fitImage));g.hideThumbs=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(p);g.showThumbs=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(p);g.showThumbs.togglein(!a.thumbsOn);g.hideThumbs.togglein(a.thumbsOn);
g.hideInfo=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(p);g.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(p);g.showInfo.togglein(!a.infoOn);g.hideInfo.togglein(a.infoOn);g.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(p);g.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(p);1<h.length?(g.play.togglein(!a.slideshowAuto),g.pause.togglein(a.slideshowAuto)):g.play.add(g.pause).hide();g.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(p);
g.prev.on("click",Ta);if(g.up)g.up.on("click",Ua);g.noresize.on("click",va);g.resize.on("click",wa);g.hideInfo.on("click",xa);g.showInfo.on("click",ya);g.hideThumbs.on("click",za);g.showThumbs.on("click",Aa);g.play.on("click",fa);g.pause.on("click",Ba);g.next.on("click",Ca);ua();a.thumbsOn||l.css("top",-u.outerHeight()-10);u.on({mouseenter:function(){H();C=!0},mouseleave:function(){C=!1}});"page"!==b("body").attr("id")&&a.hash&&"no"!==a.hash&&b.history.init(Ma);a.slideshowAuto?(z&&a.slideshowFullScreen&&
b("html").fullScreen(!0),F(s),T()):a.skipIndex&&F(s);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",ka)},bb=function(){m=b("."+c.gallery);l=b("."+c.navigation);p=b("."+c.controls);t=b("."+c.img);n=b("."+c.bottom);h=t.children("."+c.main);s=0;u=b("."+c.scrollbox);v=u.find("li > a");var d=h.find("img:first");a.mapAll&&(D=v.collectMarkers());Za();g.prev=p.children("."+c.prev);g.up=p.children("."+c.up);g.noresize=p.children("."+c.noresize);g.resize=p.children("."+c.resize);
g.hideInfo=p.children("."+c.hideInfo);g.showInfo=p.children("."+c.showInfo);g.hideThumbs=p.children("."+c.hideThumbs);g.showThumbs=p.children("."+c.showThumbs);g.play=p.children("."+c.play);g.pause=p.children("."+c.pause);g.next=p.children("."+c.next);1<u.find("."+c.cont+" a").length?(g.play.togglein(!a.slideshowAuto),g.pause.togglein(a.slideshowAuto)):g.play.add(g.pause).hide();a.hideFitBtn&&g.resize.add(g.noresize).hide();if(g.up)g.up.on("click",Va);g.noresize.on("click",va);g.resize.on("click",
wa);g.hideInfo.on("click",xa);g.showInfo.on("click",ya);g.hideThumbs.on("click",za);g.showThumbs.on("click",Aa);g.play.on("click",fa);g.pause.on("click",Ba);g.next.on("click",Ca);ua();a.thumbsOn?(g.showThumbs.hide(),g.hideThumbs.showin(),l.css({top:0}).removeClass("hide")):(g.hideThumbs.hide(),g.showThumbs.showin(),l.css({top:-u.outerHeight()-10}).removeClass("hide"));a.infoOn?(g.showInfo.hide(),g.hideInfo.showin(),n.show().css({bottom:0})):(g.hideInfo.hide(),g.showInfo.showin(),n.css({bottom:-n.outerHeight()}).hide());
a.hideFitBtn||(a.fitImage?(g.resize.hide(),g.noresize.showin()):(g.noresize.hide(),g.resize.showin()));d.length&&(h.hasClass(c.image)&&!d[0].complete?(d.on("load",function(){d.data("cached",!0);W()}).attr({src:d.attr("src")}),r=b("<div>",{"class":c.wait}).appendTo(m),r.fadeIn()):(d.data("cached",!0),W()),ra(d));if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",ka)};A?(setTimeout(Fa,1E3),h=b(this).find("td > a"),$a(),h.length&&z&&ab()):(h=b(this),bb());if(h.length&&z||!B)if(b(window).on("resize",
K),document.touchMode)b(window).on("orientationchange",K);return this};b.fn.turtle.defaults={header:"#main header",slides:"slides",thumbs:"thumbs",linkSlides:!1,loadImg:"blank.png",hash:"fileName",resPath:"res/",relPath:"",level:0,skipIndex:!1,showStart:!0,keepPrefs:600,speed:600,controlbarOpacity:0,controlOutOpacity:0,transitions:!0,preScale:0.95,slideshowDelay:4E3,slideshowLoop:!1,slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:0,afterLast:"ask",thumbsOn:!1,fitImage:!1,fitShrinkonly:!1,fitFreespace:!0,
hideFitBtn:!1,fitPadding:15,borderWidth:10,clickForNext:!0,clickBesideForIndex:!1,rightClickProtect:!1,showImageNumbers:!0,buttonLabels:!1,infoOn:!0,metaOn:!1,mapOn:!1,mapOnIndex:!1,mapOnSlide:!1,mapType:"roadmap",mapZoom:18,mapAll:!1,shopOn:!0,shopGateway:"paypal",shopCurrency:"USD",shareOn:!1,commentOn:!1,printOn:!1,regionsOn:!1,downloadNonImages:!1,enableKeyboard:!0,enableMouseWheel:!0,videoAuto:!1,videoMaximize:!1,videoTitleOn:!1,prioritizeFlash:!1,scrollDuration:1E3};b.fn.turtle.ids={gallery:"gallery",
items:"items",folders:"folders",thumbs:"thumbs",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",shopAll:"shopall",discount:"discount",fotomoto:"fotomoto",mostphotos:"mostphotos",share:"share",shares:"shares",print:"print",comments:"comments",link:"link",
custom:"custom",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isimage:"isimage",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startShow:"startshow",startBtn:"startbtn",startTxt:"starttxt",controls:"controls",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",
pause:"pause",newItem:"newlabel",showHint:"showhint",kill:"kill",load:"load",toload:"toload",feedback:"feedback",checkbox:"checkbox",selectAll:"selectall",selectNone:"selectnone"};b.fn.turtle.text={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",previousFolder:"Previous folder",
nextFolder:"Next folder",changeSpeed:"Change speed",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",newItem:"NEW",clickToOpen:"Click to open this document with the associated viewer",commentsBtn:"Comments",commentsLabel:"Add a comment, view other's comments",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",
mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, send free eCard through Fotomoto",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",people:"People",sendFeedback:"Send feedback",
message:"Message",subject:"Subject",comment:"Comment",yourEmail:"Your email address",send:"Send",messageSent:"Message sent",errorSending:"Error sending email!",tooLong:"Text is too long or too many items!",emailMissing:"Email is misssing or wrong!",noItemsSelected:"No items selected!",selectItemsHint:"Select the desired items first!",nonShoppableItems:"The selected items have no or have proprietary shopping options, or different discount rates.",buyNItems:"Buy {0} items",locationWarning:"Works only when uploaded"}})(jQuery);
